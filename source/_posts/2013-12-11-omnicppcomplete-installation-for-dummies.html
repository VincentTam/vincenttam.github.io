---
layout: post
title: OmniCppComplete Installation for Dummies
categories:
- Vim
tags:
- C/C++
- clang_complete
- OmniCppComplete
- Vim
published: true
comments: true
---
<p><span class="important_notice"><i>Note: In Stack Overflow question 12339415, it is suggested that clang is better. For its installation, refer to its another fan's <a href="http://aknow-work.blogspot.hk/2013/04/vim-clangcomplete.html" target="_blank">blog</a>.</i></span><br />Background: OmniCppComplete is a great Vim plugin that has the popup menu like many big IDEs. <a href="http://youtu.be/MQy2rVOf-z0" target="_blank">A Youtube video</a> can show the power of OmniCppComplete.<br />Download: OmniCppComplete requires ctags.<br /></p>

<p><ol><li>OmniCppComplete: <a href="https://github.com/FromtonRouge/OmniCppComplete" target="_blank">GitHub Repository</a> (To avoid mixing up of files from different plugins, use one plugin management plugin like Pathogen or Vundle.)</li><li>Ctags: <a href="http://ctags.sourceforge.net/" target="_blank">Official homepage</a> on SourceForge (The .zip file for Win* 2**0 is fine.)</li></ol></p>

<p>For more detailed information on the installation of ctags, please refer to my earlier blog post <a href="http://blogue-un.blogspot.hk/2013/12/links-to-good-posts.html" target="_blank"><i>Links to Good Posts</i></a>.<br />Problem: Reading the OmniCppComplete's documentation only, you won't be able to understand how to use this plugin, so follow some tutorials, and the most viewed one should be on <a href="http://vim.wikia.com/wiki/C%2B%2B_code_completion" target="_blank">Vim Tips Wiki</a>. Followed its guidance, I got error in typing <code>std::</code> in a new .cpp file. Omni completion told me something like "pattern not  match". I spent nearly 2 hours to figure out what's wrong, and finally  managed to fully understand the contents of <a href="http://carl830.pixnet.net/blog/post/67681043-vim-omnicppcomplete%2Bstl-support" target="_blank">this blog entry</a>.<br />Now, I'm going to make <u>a Win* version of Vim Tips Wiki's tutorial</u>, using the ideas from Carl.<br />Solution: <br /></p>

<p><ol><li>I suppose OmniCppComplete and ctags are installed properly.</li><ul><li>OmniCppComplete does not mix up with other plugins.<br />Note: For gVimPortable, do store files under the Data folder, but NOT the $VIMRUNTIME file. Otherwise the settings will be lost after upgrading gVimPortable.</li><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left:auto;margin-right:auto;text-align:center;"><tbody><tr><td style="text-align:center;"><a href="http://blogueun.files.wordpress.com/2013/12/7d448-pathogen.png" style="margin-left:auto;margin-right:auto;"><img border="0" src="http://blogueun.files.wordpress.com/2013/12/7d448-pathogen.png?w=300" height="499" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align:center;">The folder for different plugins are separated (except the plugin management plugin itself).</td></tr></tbody></table><li>Typing <code>:h omnicppcomplete</code> in Vim normal mode gives up the help file for OmniCppComplete. </li><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left:auto;margin-right:auto;text-align:center;"><tbody><tr><td style="text-align:center;"><a href="http://blogueun.files.wordpress.com/2013/12/c9495-omnicpp.png" style="margin-left:auto;margin-right:auto;"><img border="0" src="http://blogueun.files.wordpress.com/2013/12/c9495-omnicpp.png?w=300" height="480" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align:center;">Typing <code>:h omnicppcomplete</code> gives you the corresponding help file.</td></tr></tbody></table><li>The folder for ctags is in the PATH environment variable.<br />Follow <a href="http://geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx" target="_blank">this page</a> for setting the PATH variable.<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left:auto;margin-right:auto;text-align:center;"><tbody><tr><td style="text-align:center;"><a href="http://blogueun.files.wordpress.com/2013/12/a8039-ctags.png" style="margin-left:auto;margin-right:auto;"><img border="0" src="http://blogueun.files.wordpress.com/2013/12/a8039-ctags.png?w=300" height="313" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align:center;">C:\ctags58 should be in the PATH variable.</td></tr></tbody></table></li></ul><li>Download the <a href="http://www.vim.org/scripts/script.php?script_id=2358" target="_blank">modified libstdc++ headers</a> from <a href="https://github.com/vim-scripts/tags-for-std-cpp-STL-streams-..." target="_blank">GitHub</a>.</li><li>Unzip the folder and place it under "somewhere meaningful to you"<br />My suggestion: <code>C:\Users\[your-user-name]\.vim</code><br />Here you can substitute <code>[your user name]</code> with your <u>real</u> user name on Win*.<br />Note: In the dialogue (in case you use GUI), DON'T input <code>tags</code> at the end. Otherwise, you'll get <code>C:\Users\[your-user-name]\.vim<b><span class="wrong_code">\tags</span></b>\tags</code></li><li>If things go right, you should have <code>C:\Users\[your-user-name]\.vim\tags</code><br />Go to that directory by typing <code>cd .vim\tags</code> in Win*'s Command Prompt, which can be involked by typing <code>cmd</code> in the "Start" menu. (For XP, choose "Run" and type "cmd" in the popup dialogue. If you like choosing from the menu, follow <a href="http://windows.microsoft.com/en-hk/windows-vista/open-a-command-prompt-window" target="_blank">the way on the official website</a>.)<br />At first, a commad prompt should be like this.<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left:auto;margin-right:auto;text-align:center;"><tbody><tr><td style="text-align:center;"><a href="http://blogueun.files.wordpress.com/2013/12/5e9bc-cmd.png" style="margin-left:auto;margin-right:auto;"><img border="0" src="http://blogueun.files.wordpress.com/2013/12/5e9bc-cmd.png?w=300" height="417" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align:center;">The current directory is <code>C:\Users\Owner</code>.</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left:auto;margin-right:auto;text-align:center;"><tbody><tr><td style="text-align:center;"><a href="http://blogueun.files.wordpress.com/2013/12/6ef3f-cmd2.png" style="margin-left:auto;margin-right:auto;"><img border="0" src="http://blogueun.files.wordpress.com/2013/12/6ef3f-cmd2.png?w=300" height="420" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align:center;">Change the current directory to <code>C:\Users\Owner\.vim\tags</code>.</td></tr></tbody></table>The contents should be shown by typing <code>dir</code> (There're so many files that I use the <code>/w</code> option to save space.)</li><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="float:left;text-align:center;"><tbody><tr><td style="text-align:center;"><a href="http://blogueun.files.wordpress.com/2013/12/c8f73-dir1.png" style="margin-left:auto;margin-right:auto;"><img border="0" src="http://blogueun.files.wordpress.com/2013/12/c8f73-dir1.png?w=278" height="640" width="593" /></a></td></tr><tr><td class="tr-caption" style="text-align:center;">The contents are in the right place, so we may proceed.</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left:auto;margin-right:auto;text-align:center;"><tbody><tr><td style="text-align:center;"><a href="http://blogueun.files.wordpress.com/2013/12/24629-ctags1.png" style="margin-left:auto;margin-right:auto;"><img border="0" src="http://blogueun.files.wordpress.com/2013/12/24629-ctags1.png?w=300" height="419" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align:center;">Get a list of ctags.</td></tr></tbody></table>To get a list of ctags, the correct command:</ol><br />
[code gutter="false"]<br />
&amp;gt;ctags -R --sort=1 --c++-kinds=+p --fields=+iaS --extra=+q --language-force=C++ -f cpp .<br />
[/code]<br />
The one you see on Vim Tips Wiki:<br />
[code gutter="false"]<br />
&amp;gt;ctags -R --sort=1 --c++-kinds=+p --fields=+iaS --extra=+q --language-force=C++ -f cpp cpp_src<br />
[/code]
<li>Then you should have a huge list of ctags with the file name cpp. Not adding the additional tags for OpenGL, etc, is OK.</li><li>Finally, adding the lines found in the Vim Tips Wiki into your vimrc will do.<br />Note: If you don't add the additional tags in step 5, then the following lines should NOT be added.<br />
[code gutter="false"]<br />
set tags+=~/.vim/tags/gl<br />
set tags+=~/.vim/tags/sdl<br />
set tags+=~/.vim/tags/qt4<br />
[/code]
</li></p>

<p><h3>Testing</h3></p>

<p>A picture can illustrate the feature well. Typing <code>std::</code>, you'll get a popup list. <br /></p>

<p><div class="separator" style="clear:both;text-align:center;"><a href="http://blogueun.files.wordpress.com/2013/12/2260b-omni.png" style="margin-left:1em;margin-right:1em;"><img border="0" src="http://blogueun.files.wordpress.com/2013/12/2260b-omni.png?w=300" height="419" width="640" /></a></div></p>

<p><h3>Incompatibility with clang_complete</h3></p>

<p>Note that Omnicppcomplete is <i>incompatible</i> with another Vim plugin called clang_complete, due to its "unconditional popup of completion list". To understand this, the following pictures give a good interpretation.<br /><br />In Omnicppcomplete, after typing <code>std::</code>, the completion list will pop up.<br />However, in clang_complete, since the information is from the clang compiler, you need to give the syntax in the right position for the compiler so as to let the completion list to show up.<br /><br /></p>

<p><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left:auto;margin-right:auto;text-align:center;"><tbody><tr><td style="text-align:center;"><a href="http://blogueun.files.wordpress.com/2013/12/a4439-std_err.png" style="margin-left:auto;margin-right:auto;"><img border="0" src="http://blogueun.files.wordpress.com/2013/12/a4439-std_err.png?w=300" height="430" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align:center;">Missing <code>#include</code></td></tr></tbody></table></p>

<p><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left:auto;margin-right:auto;text-align:center;"><tbody><tr><td style="text-align:center;"><a href="http://blogueun.files.wordpress.com/2013/12/abab6-e89ea2e5b995e693b7e59c96e5ad98e782ba2013-12-16012151.png" style="margin-left:auto;margin-right:auto;"><img border="0" src="http://blogueun.files.wordpress.com/2013/12/abab6-e89ea2e5b995e693b7e59c96e5ad98e782ba2013-12-16012151.png?w=300" height="430" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align:center;">Still wrong position of the input</td></tr></tbody></table></p>

<p><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left:auto;margin-right:auto;text-align:center;"><tbody><tr><td style="text-align:center;"><a href="http://blogueun.files.wordpress.com/2013/12/04fd9-e89ea2e5b995e693b7e59c96e5ad98e782ba2013-12-16012221.png" style="margin-left:auto;margin-right:auto;"><img border="0" src="http://blogueun.files.wordpress.com/2013/12/04fd9-e89ea2e5b995e693b7e59c96e5ad98e782ba2013-12-16012221.png?w=300" height="430" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align:center;">Right position</td></tr></tbody></table></p>

<p>In Ubuntu, it's easy to install. Note that you need <code>clang-dev</code> as well. For Win*, maybe you need to download the source. (I hope there will be a <i>compiled version of the compiler</i>.)</p>
