---
layout: post
title: Working with Vim's Autocommand Groups
date: 2014-01-27 02:07:02 +0800
categories:
- Vim
published: true
comments: true
---
<p>Before including the autocommand group, I'd write about the reason of using it.</p>

<p>In my post titled <a href="/blog/2013/12/11/links-to-good-posts/"><em>Links to Good Posts</em></a>, I've included some custom autocompletion keyboard mappings for the automatic completion of <code>{}</code>, <code>[]</code> and <code>()</code> blocks in my VIMRC file.</p>

<p>Last Thursday, I extended them to blocks enclosed by single or double quotes.</p>

{% codeblock lang:vim %}
inoremap " ""<++><Left><Left><Left><Left><Left>
inoremap "" "
inoremap ' ''<++><Left><Left><Left><Left><Left>
inoremap '' '
{% endcodeblock %}

<p><a href="http://github.com/honza/vim-Snippets">Vim-Snippets</a> has saved me a lot of time while writing blogs in <a href="http://www.vim.org">Vim</a>. With Vim-snippets and <a href="http://github.com/tpope/vim-surround">Vim-surround</a>, the following question is <em>not</em> so useful.</p>

<p><strong>How can Vim do the same type of job for angled block <em>for HTML files only</em>?</strong></p>

<!-- more -->

<p>It is possible that you can find the <code>&lt;</code> character in $\rm \LaTeX$ source files which contains an inequality. In this case, we <em>don't</em> want the <code>&gt;</code> character to be Automatically inserted to the right-hand side of the <code>&lt;</code> character. Therefore, we need to enable this completion <em>only for the files with the right extension name(s)</em>.</p>

<p>From some web pages that include some autocommands that deal with some specific type(s) of files, one can easily learn what to do, instead of reading the long Reference Manual. The events needed are <code>BufNewFile</code> and <code>BufRead</code>.</p>

{% codeblock lang:vim %}
aug specialCompletion
au BufNewFile,BufRead *.htm,*.html inoremap < <<Left><Right>><++><Left><Left><Left><Left><Left>
au BufNewFile,BufRead *.htm,*.html inoremap << <
au BufNewFile,BufRead *.tex set spell
au BufLeave *.tex set nospell
aug END
{% endcodeblock %}

<p>At line 87, I initially tried using a whitespace character to separate the two extension names. After that, I tried to edit an HTML file with the command <code>:e testing.html</code>, but the autocompletion didn't work. For the command <code>:e testing.htm</code>, Vim threw me an error. It took me a short while to figure out that commas should be used instead of whitespaces. I know that the problem can be beautifully solved by using regular expressions, but I'm <em>not</em> sure if <code><em>.htm[l]</em></code> is correct, and I lack time to test it. I'd like to insert an angled block with empty content, but after I inserted the string <code>&lt;&gt;</code> into my VIMRC file, the syntax highlighter of Vim told me that Vim perceived the empty angled block as the surrounding parts of a literal string which represents a keystroke. To solve this problem, I inserted the literal string that represents a <code>&lt;Left&gt;</code> key followed by a <code>&lt;Right&gt;</code> key inside the originally empty angled block <code>&lt;&gt;</code>. This is what you can see at line 87. With the aid of the syntax highlighter of Vim, the new autocommand has "revealed its colour" in my VIMRC, indicating the success of this change.</p>

<p>Despite the uselessness of this autocommand, I thought I had found out a way to switch Vim's spell check on for $\rm \LaTeX$ source files. However, moved to a buffer for $\rm \LaTeX$ source files to another buffer for an HTML file, I discovered that the <code>spell</code> option is <em>still</em> on, which is <em>not</em> desired for editing an HTML file. Fortunately, I succeeded in finding the correct autocommand eventâ€”BufLeave.</p>

<p>P.S. While writing HTML code in Vim, if you need to include the <code>&lt;</code> character, you can record the encoded string of this character into a register. (say, <code>l</code>, which stands for "<strong>l</strong>ess than") To use the register, type <code>&lt;C-r&gt;</code> in the insert mode first. Then input the name of the register. (a lowercase alphabet) In addition, I use the <code>t</code> register for inserting a hyperlink which opens the target in a new tabbed page in an HTML file.</p>

<hr />

<p>Last edited on FEB 3, 2014</p>

<p>It seems that what I need is the <code>Filetype</code> event.</p>

{% codeblock lang:vim %}
aug specialCompletion
au Filetype html inoremap < <<Left><Right>><++><Left><Left><Left><Left><Left>
au Filetype html inoremap << <
au Filetype tex setlocal spell
aug END
{% endcodeblock %}

<p>Posted via <a href="http://0x3f.org/blog/ultrablog-as-an-ultimate-vim-blogging-plugin/">UltraBlog.vim</a>.</p>
