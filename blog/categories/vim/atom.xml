<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Vim | Blog 1]]></title>
  <link href="https://vincenttam.github.io/blog/categories/vim/atom.xml" rel="self"/>
  <link href="https://vincenttam.github.io/"/>
  <updated>2016-02-22T14:15:51+08:00</updated>
  <id>https://vincenttam.github.io/</id>
  <author>
    <name><![CDATA[Vincent Tam]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    
      <title type="html"><![CDATA[Git for Windows, Curl, Gist.vim With Vundle (1)]]></title>
      <link href="https://vincenttam.github.io/blog/2016/02/22/git-for-windows-curl-gist-dot-vim-with-vundle-1/"/>
    
    <updated>2016-02-22T10:23:53+08:00</updated>
    <id>https://vincenttam.github.io/blog/2016/02/22/git-for-windows-curl-gist-dot-vim-with-vundle-1</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>I installed msysgit 1.9.0, and added its bash utilities to <code>PATH</code>.</p>

<h2 id="problem">Problem</h2>

<p>I attempted to open an HTML file with <code>curl</code>.  However, I got the
following error.</p>

<pre class="cli"><code>C:\Windows\system32\cmd.exe /c (curl 'http://www.vim.org/index.html' -o 'C:/Temp
/PortableApps/gVimPortable/Data/Temp/VIA1ED5.html')
curl: (1) Protocol "'http" not supported or disabled in libcurl
shell returned 1
Hit any key to close this window...
</code></pre>

<h2 id="discussion">Discussion</h2>

<p>In the first line of the code block, <code>cmd.exe</code> with option <code>/c</code> ran
the command in the parenthesis <code>()</code>.  I copied the command inside <code>()</code>
and ran it in <code>cmd.exe</code>, and the error was reproduced.</p>

<p>It’s easy to find the cause of the problem.  I typed “curl protocol”
on the Google search web page, and the rest of the error message
appeared in the list of suggestions.  In the first search result,
which was <a href="http://stackoverflow.com/q/6684235">a Stack Overflow question</a>, I learnt why this
error occurred from the first answer—in the Command Prompt, one
needs to use double quotes <code>""</code> instead of single quotes <code>''</code>.  In Git
Bash, this <em>doesn’t</em> matter.</p>

<p>Since <code>curl</code> was bundled with msysgit, I suspected that the installed
version of Git was too old.  I then upgraded it.</p>

<h2 id="lessons-learnt">Lessons learnt</h2>

<ol>
  <li>For a shell program (e.g. Command Prompt, bash), the option <code>-c</code>
(or <code>/c</code>) stands for “command”, and what’s left is the command to
be run.</li>
  <li><code>curl</code> will grab content from the input URL and display it as
standard output.  To save the downloaded content in a file, the
flag <code>-o</code>, which means “output”, can be used.</li>
</ol>

]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[Hyperlinks in Ordered Lists in Markdown in Vim]]></title>
      <link href="https://vincenttam.github.io/blog/2016/02/10/hyperlinks-in-ordered-lists-in-markdown-in-vim/"/>
    
    <updated>2016-02-10T01:06:42+08:00</updated>
    <id>https://vincenttam.github.io/blog/2016/02/10/hyperlinks-in-ordered-lists-in-markdown-in-vim</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>Same as the one in <a href="/blog/2016/02/09/rake-aborted-due-to-a-vim-swap-file/">my previous post</a>.</p>

<p>I usually write hyperlinks for software names using only one pair of
square brackets, like <code>[Vim]</code> instead of <code>[Vim][Vim]</code>.  Even though
this <em>isn’t</em> standard, this is more convenient.</p>

<h2 id="problem">Problem</h2>

<p>I want to start the second item of the following ordered list with a
hyperlink to <a href="https://github.com/kana/vim-textobj-lastpat">textobj-lastpat</a> written in a short but non-standard
way.</p>

<p><figure class='code'><figcaption><span>Markdown source code of the ordered list  (test-post.mkd)</span> <a href='/downloads/code/olhlmdvim/test-post.mkd'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>Lessons learnt
</span><span class='line'>---
</span><span class='line'>
</span><span class='line'>Moreover, I revised the usage of these two [Vim] plugins.
</span><span class='line'>
</span><span class='line'>1. [Visual Star Search][visual-star-search]: Select text in visual
</span><span class='line'>   mode and search it with an asterisk `*`.
</span><span class='line'>2. [textobj-lastpat]: Add the last search pattern as a text object.
</span><span class='line'>
</span><span class='line'>[Vim]: http://www.vim.org
</span><span class='line'>[visual-star-search]: https://github.com/bronson/vim-visual-star-search
</span><span class='line'>[textobj-lastpat]: https://github.com/kana/vim-textobj-lastpat
</span></code></pre></td></tr></table></div></figure></p>

<p>Unluckily, as I typed this Vim Ex command
<a href="/blog/2015/08/05/a-quick-markdown-syntax-error-detection-for-writing-mathjax-equations-in-octopress-posts-3/">to see whether my Markdown syntax was correct</a>, I quickly
received an error from <a href="http://kramdown.gettalong.org">kramdown</a>.</p>

<pre class="cliUB"><code>:!kramdown % &gt; %&lt;.html
</code></pre>

<p>You may click “donwload” at the top right hand corner of the codeblock
below to see the effect of the result generated by ihe Markdown
parser.</p>

<p><figure class='code'><figcaption><span>Generated HTML code of the ordered list (test-post.html)</span> <a href='/downloads/code/olhlmdvim/test-post.html'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;h2</span> <span class="na">id=</span><span class="s">&quot;lessons-learnt&quot;</span><span class="nt">&gt;</span>Lessons learnt<span class="nt">&lt;/h2&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>Moreover, I revised the usage of these two <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.vim.org&quot;</span><span class="nt">&gt;</span>Vim<span class="nt">&lt;/a&gt;</span> plugins.<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;ol&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;https://github.com/bronson/vim-visual-star-search&quot;</span><span class="nt">&gt;</span>Visual Star Search<span class="nt">&lt;/a&gt;</span>: Select text in visual
</span><span class='line'>mode and search it with an asterisk <span class="nt">&lt;code&gt;</span>*<span class="nt">&lt;/code&gt;</span>.<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ol&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<pre class="cliUB"><code>Warning: Duplicate link ID 'textobj-lastpat' on line 13 - overwriting

Press ENTER or type command to continue
</code></pre>

<h2 id="solution">Solution</h2>

<p>This time, I <em>won’t</em>
<a href="http://polymerhk.com/articles/2016/02/03/27363/">find out what’s wrong from the error message</a> because writing
that hyperlink in the standard way is the quickest solution that I
know.</p>

]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[Indentation of Titles in Markdown Files in Vim]]></title>
      <link href="https://vincenttam.github.io/blog/2016/02/10/indentation-of-titles-in-markdown-files-in-vim/"/>
    
    <updated>2016-02-10T00:05:04+08:00</updated>
    <id>https://vincenttam.github.io/blog/2016/02/10/indentation-of-titles-in-markdown-files-in-vim</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>While I was writing
<a href="/blog/2016/02/09/rake-aborted-due-to-a-vim-swap-file/">a post about a technical problem encountered</a> while writing
<a href="/blog/2016/02/09/my-venn-diagram-mistake/">another post about Venn diagram</a>, I encountered another
technical problem.</p>

<h2 id="problem">Problem</h2>

<p>I tried including the error message into the previous post by the Vim
editor command <code>:r ~/lang:text temp-swp.mkd</code>.  To have it surrounded with
<code>&lt;pre&gt;&lt;code&gt;</code> in HTML, one needs to indent it by four spaces.</p>

<p><figure class='code'><figcaption><span>A section of the error message  (temp-swp.mkd)</span> <a href='/downloads/code/temp-swp.mkd'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>## Generating Site with Jekyll
</span><span class='line'>    write source/stylesheets/screen.css
</span><span class='line'>Configuration file: /home/owner/octopress/_config.yml
</span><span class='line'>            Source: source
</span><span class='line'>       Destination: public
</span><span class='line'>      Generating...
</span><span class='line'>                    done.
</span><span class='line'> Auto-regeneration: disabled. Use --watch to enable.
</span></code></pre></td></tr></table></div></figure></p>

<p>I usally do this by applying the right-shift operator <code>&gt;</code> to the text
selected in visual line mode.  However, the line starting with <code>#</code>
<em>wasn’t</em> indented like the others.</p>

<p><figure class='code'><figcaption><span>A failed indentation  (temp-swp1.mkd)</span> <a href='/downloads/code/temp-swp1.mkd'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>## Generating Site with Jekyll
</span><span class='line'>        write source/stylesheets/screen.css
</span><span class='line'>    Configuration file: /home/owner/octopress/_config.yml
</span><span class='line'>                Source: source
</span><span class='line'>           Destination: public
</span><span class='line'>          Generating...
</span><span class='line'>                        done.
</span><span class='line'>     Auto-regeneration: disabled. Use --watch to enable.
</span></code></pre></td></tr></table></div></figure></p>

<!-- more -->

<h2 id="discussion">Discussion</h2>

<p>If I started <a href="http://www.vim.org">Vim</a> with all plugins disabled with <code>vim -u NONE -N</code>,
then the above problem <em>won’t</em> happen.</p>

<h2 id="solution">Solution</h2>

<p>Use the visual block mode instead.  Either one way will do.</p>

<ol>
  <li>Keep using the <code>&gt;</code> operator.</li>
  <li>Use <code>I    </code> instead of <code>&gt;</code>.</li>
</ol>

]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[Rake Aborted Due to a Vim Swap File]]></title>
      <link href="https://vincenttam.github.io/blog/2016/02/09/rake-aborted-due-to-a-vim-swap-file/"/>
    
    <updated>2016-02-09T20:49:29+08:00</updated>
    <id>https://vincenttam.github.io/blog/2016/02/09/rake-aborted-due-to-a-vim-swap-file</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>I’m using <a href="https://github.com/tpope/vim-fugitive" title="a Git wrapper in Vim">fugitive.vim</a> for efficient verson control.<sup id="fnref:pp1"><a href="#fn:pp1" class="footnote">1</a></sup></p>

<h2 id="problem">Problem</h2>

<p>Tonight, I wrote <a href="/blog/2016/02/09/my-venn-diagram-mistake/">an article about Venn diagram</a>, and I attempted
to publish it using the Vim editor command</p>

<pre class="cliUB"><code>:Gpush|!rake gen_deploy &amp;&amp; rake notify
</code></pre>

<p>After that, the following error message popped up.</p>

<pre class="cliUB"><code>[owner@localhost ~/octopress]$ vi
To git@github.com:VincentTam/vincenttam.github.io.git
   c6c422a..fc8d6b8  source -&gt; source

## Generating Site with Jekyll
    write source/stylesheets/screen.css
Configuration file: /home/owner/octopress/_config.yml
            Source: source
       Destination: public
      Generating... 
                    done.
 Auto-regeneration: disabled. Use --watch to enable.
cp -r source/_posts/.2016-02-09-my-venn-diagram-mistake.markdown.swp public/_posts/.2016-02-09-my-venn-diagram-mistake.markdown.swp
rake aborted!
Errno::ENOENT: No such file or directory @ rb_sysopen - public/_posts/.2016-02-09-my-venn-diagram-mistake.markdown.swp
/home/owner/octopress/Rakefile:276:in `block (2 levels) in &lt;top (required)&gt;'
/home/owner/octopress/Rakefile:275:in `block in &lt;top (required)&gt;'
/home/owner/octopress/Rakefile:265:in `block in &lt;top (required)&gt;'
/home/owner/.rvm/gems/ruby-2.1.2/bin/ruby_executable_hooks:15:in `eval'
/home/owner/.rvm/gems/ruby-2.1.2/bin/ruby_executable_hooks:15:in `&lt;main&gt;'
Tasks: TOP =&gt; copydot
(See full trace by running task with --trace)

shell returned 1

Press ENTER or type command to continue
</code></pre>

<p>When one sees an error message like above for the first time, one
needs <em>not</em> look directly into code, even though one is writing code
in an <abbr title="Integrated Development Environment">IDE</abbr>.  Instead, one may <a href="http://polymerhk.com/articles/2016/02/03/27363/">view the error log</a> to see what’s
wrong.</p>

<p>From the command <code>cp -r ...</code>, I realised that the problem came from
<code>Rakefile</code>, which tried to copy the non-existent
<code>.2016-blablabla.markdown.swp</code> in the <code>public</code> folder in the local
folder for this blog to the <code>_deploy</code> folder.<sup id="fnref:gitrepo"><a href="#fn:gitrepo" class="footnote">2</a></sup>  (There are
<em>no</em> <code>_posts</code> folder under the <code>public</code> folder.)</p>

<p><strong>How can I do the task <em>within</em> Vim?</strong></p>

<!-- more -->

<h2 id="solution">Solution</h2>

<p>I googled “rake generate ignore swp”, and clicked on
<a href="https://github.com/imathis/octopress/issues/1073">the first search result</a>, which is Octopress issue #1073.  It
provided a link to <a href="https://github.com/imathis/octopress/issues/600">issue #600</a>.  Bradon Mathis said that <q cite="https://github.com/imathis/octopress/blob/2.1/Rakefile#L265">this
has been <a href="https://github.com/imathis/octopress/blob/2.1/Rakefile#L265">fixed in 2.1</a></q>.  Unluckily, after hitting that
hyperlink, I found that the version of <code>Rakefile</code> shown online was
<em>different</em> from mine. Finally, I installed <a href="https://github.com/tangledhelix/vim-octopress">vim-octopress</a> to solve
this problem.<sup id="fnref:installation"><a href="#fn:installation" class="footnote">3</a></sup>  If this plugin supports background tasks
like <code>rake preview</code>, the blogging experience using <a href="http://octopress.org">Octopress</a> within
<a href="http://www.vim.org">Vim</a> will be further enhanced.</p>

<h2 id="lessons-learnt">Lessons learnt</h2>

<p>I’ve learnt to use <a href="http://www.w3schools.com/tags/att_q_cite.asp">the HTML cite tag</a> when I directly quote
a short phrase from others to avoid being penalised by the Google
search engine for lacking originality.</p>

<p>Moreover, I revised the usage of these two Vim plugins.</p>

<ol>
  <li><a href="https://github.com/bronson/vim-visual-star-search">Visual Star Search</a>: Select text in visual
mode and search it with an asterisk <code>*</code>.</li>
  <li><a href="https://github.com/kana/vim-textobj-lastpat">textobj-lastpat</a>: Add the last search pattern as a text
object.</li>
</ol>

<hr />

<div class="footnotes">
  <ol>
    <li id="fn:pp1">
      <p>I’ve used this Vim plugin <a href="/blog/2016/02/09/my-venn-diagram-mistake/#fugitivevim">for more than a year</a>. <a href="#fnref:pp1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:gitrepo">

      <p>Strictly speaking, the <code>public</code> folder <em>isn’t</em> in the <em>Git
repository</em> because <em>this folder isn’t *tracked by the version
control system</em> (VCS). <a href="#fnref:gitrepo" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:installation">

      <p>For more details, you may see my gist for the <code>.vimrc</code> on Ubuntu
at version <a href="https://goo.gl/2Uq5AU">a2c8028</a>. <a href="#fnref:installation" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[Find Files for Vim to Edit in Bash]]></title>
      <link href="https://vincenttam.github.io/blog/2015/08/23/find-files-for-vim-to-edit-in-bash/"/>
    
    <updated>2015-08-23T23:48:54+08:00</updated>
    <id>https://vincenttam.github.io/blog/2015/08/23/find-files-for-vim-to-edit-in-bash</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>Since copying and pasting the output of a command can be a tedious
job.  For example, if you want to create your blog using a framework,
you may first logon to your <a href="https://github.com">GitHub</a> account and create an <em>empty</em>
repository there, then <code>git clone</code> <a href="http://octopress.org">Octopress</a>/<a href="http://jekyllbootstrap.com">Jekyll-Bootstrap</a> from
GitHub, reset the <code>origin</code> <abbr title="Uniform Resource Locator">URL</abbr>, and input the new <abbr title="Uniform Resource Locator">URL</abbr> based on the old
one.</p>

<p>After having created a repository online, you will see the <abbr title="Uniform Resource Locator">URL</abbr> of the
repository using the <abbr title="Secure SHell">SSH</abbr> protocol.  If one <em>doesn’t</em> want to repeat
the start of the <abbr title="Uniform Resource Locator">URL</abbr> <code>git@github.com:</code>, one may use the bash commands
introduced in <a href="/blog/2015/08/22/used-more-bash-utilities/">the previous post</a> to extract its useful parts for
the <code>sed</code> substitution.</p>

<pre class="cliUB"><code>$ git remote -v
octopress	git@github.com:imathis/octopress.git (fetch)
octopress	git@github.com:imathis/octopress.git (push)
origin	git@github.com:VincentTam/vincenttam.github.io.git (fetch)
origin	git@github.com:VincentTam/vincenttam.github.io.git (push)
$ name=userName; repo=repoName
$ git remote -v | sed -n '3{p;q}' | awk '{print $2}' | sed -r \
"s;(\w*)/(.*).git;$name/$repo.git;"
$ unset name repo
</code></pre>

<h2 id="problem">Problem</h2>

<p>I tried extracting a list of Markdown files containing a particular
word and passing them to <a href="http://www.vim.org">Vim</a> as arguments using <code>find</code>, <code>grep</code> and
<code>xargs</code>.  Unluckily, I got an error.</p>

<pre class="cliUB"><code>$ find source/_posts/ -name "*.markdown" -exec grep -q ^tag {} \; \
&gt; -print | xargs vi
Vim: Warning: Input is not from a terminal
3 files to edit
$ 
</code></pre>

<p>Note: <em>Without</em> the <code>-print</code> flag, the above command <em>won’t</em> work.</p>

<!-- more -->

<h2 id="solution">Solution</h2>

<p>As a result, I searched “vim warning input is not from a terminal
xargs” on Google, and found <a href="http://superuser.com/q/336016">this question</a> very useful.  I
should have wrapped the <code>find</code> command like <code>$(find ...)</code>.</p>

<pre class="cliUB"><code>$ vi $(find source/_posts/ -name "*.markdown" -exec \
&gt; grep -q ^tag {} \; -print | xargs)
3 files to edit
</code></pre>

<h2 id="facts-learnt">Facts learnt</h2>

<h3 id="sed">sed</h3>
<ul>
  <li><code>3{p;q}</code>: quit after printing the third line for the sake of
  efficiency</li>
  <li><code>-r</code>: use extended regular expression to save the trouble of
  escaping <code>()</code> for submatches.</li>
  <li><code>-n</code>: suppress standard output.</li>
  <li>Enclose the expression
    <ul>
      <li>with <em>single</em> quotes to <em>disable</em> interpretation of bash
  variables</li>
      <li>with <em>double</em> quotes to <em>enable</em> interpretation of bash
  variables.</li>
    </ul>
  </li>
  <li>One can replace the delimiter <code>/</code> in the expression
  <code>s/{pat}/{repl}/</code> by any one character from <code>_;#| </code>.</li>
  <li>Specify a custom delimiter like <code>\%.%s%foo%bar%</code>.  (The
  variable/range <code>.</code> is <em>needed</em>.)</li>
</ul>

<h3 id="bash">bash</h3>

<ul>
  <li>Set variables using <code>var1=value1;var2=value2;...</code></li>
  <li>Unset variable usign <code>unset var1 var2 ...</code></li>
</ul>

]]></content>
    
  </entry>
  
</feed>
