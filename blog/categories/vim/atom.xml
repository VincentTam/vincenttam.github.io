<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Vim | Blog 1]]></title>
  <link href="https://vincenttam.github.io/blog/categories/vim/atom.xml" rel="self"/>
  <link href="https://vincenttam.github.io/"/>
  <updated>2016-02-29T01:31:02+08:00</updated>
  <id>https://vincenttam.github.io/</id>
  <author>
    <name><![CDATA[Vincent Tam]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    
      <title type="html"><![CDATA[Git for Windows, Curl, Gist.vim With Vundle (5)]]></title>
      <link href="https://vincenttam.github.io/blog/2016/02/29/git-for-windows-curl-gist-dot-vim-with-vundle-5/"/>
    
    <updated>2016-02-29T00:35:30+08:00</updated>
    <id>https://vincenttam.github.io/blog/2016/02/29/git-for-windows-curl-gist-dot-vim-with-vundle-5</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>In <a href="/blog/2016/02/22/git-for-windows-curl-gist-dot-vim-with-vundle-3/">the third post of this series</a>, I ran the editor command</p>

<pre class="cli"><code>:!git config --list
</code></pre>

<p>inside <a href="http://portableapps.com/apps/development/gvim_portable">GVim Portable</a>, but I got a fatal error.  I
found out how to get <a href="https://github.com/mattn/gist-vim">Gist.vim</a> work <em>without</em> solving this problem.</p>

<h2 id="problem">Problem</h2>

<p><strong>How to avoid this fatal error?</strong></p>

<pre class="cli"><code>C:\Windows\system32\cmd.exe /c (git config --global --list)
fatal: unable to read config file 'C:\Temp\PortableApps\gVimPortable\Data\settin
gs/.gitconfig': No such file or directory
shell returned 128
Hit any key to close this window...
</code></pre>

<!-- more -->

<h2 id="solution">Solution</h2>

<p>I forgot <a href="http://polymerhk.com/articles/2016/02/03/27363/">this article about programming</a> that I’d read several
weeks ago.  I should have pay more attention of the error message
itself, rather than the Google search results of this message.  Hence,
creating a symbolic link for <code>C:\Users\foo\.gitignore</code> to the
<code>path/to/Data/settings</code> folder.</p>

<h2 id="remarks">Remarks</h2>

<p>While writing this post, I re-read
<a href="/blog/2016/02/09/rake-aborted-due-to-a-vim-swap-file/"><em>Rake Aborted Due to a Vim Swap File</em></a> so as to find the URL of
the article about programming.  I discovered a broken link in the
GitHub page for <a href="https://github.com/imathis/octopress/issues/600#issuecomment-6206116">Octopress issue #600</a>.  From the list of
branches in the homepage for this GitHub project, I found <code>site-2.1</code>,
on which commit <a href="https://github.com/imathis/octopress/commit/2399008">2399008</a> was located.  Therefore, I made commit
<a href="https://github.com/VincentTam/vincenttam.github.io/commit/68b0adb">68b0adb</a> in the repository for this blog.</p>

]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[Git for Windows, Curl, Gist.vim With Vundle (4)]]></title>
      <link href="https://vincenttam.github.io/blog/2016/02/22/git-for-windows-curl-gist-dot-vim-with-vundle-4/"/>
    
    <updated>2016-02-22T18:38:00+08:00</updated>
    <id>https://vincenttam.github.io/blog/2016/02/22/git-for-windows-curl-gist-dot-vim-with-vundle-4</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>In <a href="/blog/2016/02/22/git-for-windows-curl-gist-dot-vim-with-vundle-2/">the second post in this series</a>, we see that the space in the
path of Git Bash can become a source of trouble.</p>

<h2 id="problem">Problem</h2>

<p><strong>How to run external commands in GVim Portable invoked by Git Bash?</strong></p>

<!-- more -->

<h2 id="a-failed-attempt">A failed attempt</h2>

<p>I googled “vim shell path program files”, and clicked
<a href="http://stackoverflow.com/a/13917410">the first web site</a> as usual.  Even though I <em>don’t</em>, and
<em>won’t</em> have Cygwin installed in my computer, I still viewed this
page, which suggested that the path of <code>shell</code> option should be
surrounded by a pair of double quotes <code>""</code>.  I tried this, but the
above problem <em>wasn’t</em> solved.</p>

<h2 id="solution">Solution</h2>

<p>I recalled that after opening the built-in editor in Command Prompt on
M$ Win* Professional/Enterprise, the displayed path of the working
directory would be different: some tildes appear in the path.</p>

<p>Therefore, I googled “windows path without spaces”, and learnt to use
<code>DIR /X</code> in Command Prompt to <a href="https://goo.gl/a9eHZF">solve this problem</a> from an
answer to <a href="http://superuser.com/a/179450">this Super User question</a>.  Finally, usual
external commands like <code>ls</code> and <code>file</code> can be executed inside GVim
Portable.  This solves the error mentioned in the “Discussion” section
of <a href="/blog/2016/02/22/git-for-windows-curl-gist-dot-vim-with-vundle-2/">the second post in this series</a>.  What I’ve wriiten in the
“Solution” section can be updated: I expect that under usual
circumstances, the external commands can be run even if the <code>shell</code>
option is set to Git Bash.</p>

<h2 id="remarks">Remarks</h2>

<p>I used an <code>if</code> statement to surround the <code>set shell=/path/to/bash.exe</code>
because <a href="http://stackoverflow.com/a/13917410">the same Stack Overflow answer</a> mentioned in the
“A failed attempt” section said that many Vim plugins used
<code>has("win32")</code>.  If a plugin failed in a GVim window triggered by Git
Bash, I can still use it by opening GVim with Command Prompt.</p>

<p>Now, though using <code>curl</code> in GVim whose <code>shell</code> is configured to
<code>cmd.exe</code>, I can finally use <code>curl</code> in GVim invoked by Git Bash.</p>

]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[Git for Windows, Curl, Gist.vim With Vundle (3)]]></title>
      <link href="https://vincenttam.github.io/blog/2016/02/22/git-for-windows-curl-gist-dot-vim-with-vundle-3/"/>
    
    <updated>2016-02-22T16:54:53+08:00</updated>
    <id>https://vincenttam.github.io/blog/2016/02/22/git-for-windows-curl-gist-dot-vim-with-vundle-3</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>A VIMRC is important for efficient text editing.  It can be over one
hundred lines.  It’s good to have the changes tracked.  One <em>entire</em>
folder <code>.git</code> for <em>one</em> single text file will be too much.  Since my
VIMRCs <em>don’t</em> have anything secret, I upload them to Gist like many
other users, and read others’ configuration files so as to learn from
them.</p>

<p>Nonetheless, my workflow of uploading Gists on M$ Win* was not quite
efficient.  Therefore, I re-read the installation instructions for
<a href="https://github.com/mattn/gist-vim">Gist.vim</a>.  Since <code>curl.cmd</code> has already been set up during the
installation of Vundle.vim, I used Vundle to install Gist.vim.</p>

<p>Due to the problem mentioned in
<a href="/blog/2016/02/22/git-for-windows-curl-gist-dot-vim-with-vundle-2/">the previos post in this series</a>, I opened GVim from Command
Prompt instead of Git Bash.</p>

<h2 id="problem">Problem</h2>

<p>I have already configure <code>github.user</code> to my GitHub user name, but
Gist.vim still complained that <em>no</em> GitHub user name was found.</p>

<pre class="cli"><code>You have not configured a Github account. Read ":help gist-vim-setup".
</code></pre>

<!-- more -->

<h2 id="discussion">Discussion</h2>

<p>I tried looking into the source code of the Vim plugin.  I learnt from
<em>Learn Vim Script the Hard Way</em> the difference between <code>echo</code> and
<code>echom</code>: the former <em>isn’t</em> persistent; the later can be retrieved by
<code>message</code>.  It took me a few minutes to find out that Command Prompt,
the program set by <code>shell</code> option, <em>didn’t</em> take my global
configurations into account.  I viewed the list of my configurations
using the following command.</p>

<pre class="cli"><code>:!git config --list
</code></pre>

<p>I <em>didn’t</em> see <code>github.user</code> in the list.  I tried adding <code>--global</code>,
and I got an error.</p>

<pre class="cli"><code>C:\Windows\system32\cmd.exe /c (git config --global --list)
fatal: unable to read config file 'C:\Temp\PortableApps\gVimPortable\Data\settin
gs/.gitconfig': No such file or directory
shell returned 128
Hit any key to close this window...
</code></pre>

<p>I <em>failed</em> to comprehend the second line of the above output.  I just
realised that this had something to do with GVim Portable.  If I use
GVim instead, I <em>won’t</em> have such trouble since <code>.gitconfig</code> is
located at the home folder.</p>

<h2 id="solution">Solution</h2>

<p>I searched for a tutorial of using this plugin.  Finally, from a
Japanese website which I forgot its URL, I found out that one can
manually set the variable <code>github_user</code> in VIMRC.</p>

<p>After that, I restarted the editor and invoked the plugin, which then
asked for my GitHub password and created a token in
<code>/path/to/gVimPortable/Data/settings/.gist-vim</code>.</p>

]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[Git for Windows, Curl, Gist.vim With Vundle (2)]]></title>
      <link href="https://vincenttam.github.io/blog/2016/02/22/git-for-windows-curl-gist-dot-vim-with-vundle-2/"/>
    
    <updated>2016-02-22T14:32:04+08:00</updated>
    <id>https://vincenttam.github.io/blog/2016/02/22/git-for-windows-curl-gist-dot-vim-with-vundle-2</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>I had been using <a href="https://github.com/tpope/vim-pathogen">pathogen.vim</a> to manage plugin.  When it comes to
keeping the plugins up-to-date, <a href="/blog/2014/10/11/update-vim-plugins-managed-by-pathogen-dot-vim/">I used a for-loop</a>.</p>

<h2 id="problem">Problem</h2>

<p>I would like to change it to <a href="https://github.com/VundleVim/Vundle.vim/">Vundle</a> since I <em>didn’t</em> know how to
update the helptags after merging the commits from GitHub.  Therefore,
I followed the installation guide of Vundle.  However, when I started
updating, I got the following error.</p>

<pre class="cli"><code>Processing 'tpope/vim-fugitive'
Error detected while processing function vundle#installer#new..&lt;SNR&gt;96_process..
vundle#installer#run..vundle#installer#install..&lt;SNR&gt;96_sync..&lt;SNR&gt;96_make_sync_
command..&lt;SNR&gt;96_get_current_origin_url..&lt;SNR&gt;96_system:
line    1:
E484: Can't open file C:/Temp/PortableApps/gVimPortable/Data/Temp/VIo985B.tmp
Error detected while processing function vundle#installer#new..&lt;SNR&gt;96_process..
vundle#installer#run..vundle#installer#install..&lt;SNR&gt;96_sync:
-- More -- SPACE/d/j: screen/page/line down, b/u/k: up, q: quit
</code></pre>

<p><strong>How can I get the Vim plugin updates?</strong></p>

<!-- more -->

<h2 id="discussion">Discussion</h2>

<p>Google <em>didn’t</em> help this time.  <em>Not</em> knowing what to do, I ran a
simple command <code>ls</code>, and this <em>failed</em>.</p>

<pre class="cli"><code>C:\Program Files\Git\usr\bin\bash -c "ls"
'C:\Program' is not recognized as an internal or external command,
operable program or batch file.
shell returned 1
Hit any key to close this window...
</code></pre>

<p>From the above output, one knows that the cause of this unexpected
failure is the whitespace character in the path of Git Bash.  As a
result, I searched “vim ‘C:\Program’ is not recognized as an internal
or external” in Google.  Then I realised that it was
<a href="http://vi.stackexchange.com/a/2424">a bug in Vim</a>.  Since I <em>didn’t</em> want to spend time setting
up GVim again, I stick to GVim Portable, whose runpath is <em>different</em>
from what many developers of Vim plugins, who use *nix, expect.</p>

<h2 id="solution">Solution</h2>

<p>Invoke GVim from Command Prompt,Start Menu or desktop icon instead of
Git Bash because the <code>shell</code> option will then be <code>cmd.exe</code>, whose path
contains <em>no</em> spaces.  Then everything should be fine, <em>except the
line breaks</em>.</p>

<h2 id="remarks">Remarks</h2>

<p>Some developers include a <code>.gitignore</code> file in their Vim plugins to
ignore files like <code>docs/tags</code>, while some <em>don’t</em>.  IMHO, it’s better
to have one.</p>

<p>One good point of free software is that users can interact with
developers to report and discuss the problems, or even share their
code to improve the software, for example, <a href="https://github.com/tangledhelix/vim-octopress">vim-octopress</a> pull
request <a href="https://github.com/tangledhelix/vim-octopress/pull/11">#11</a>.</p>

]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[Git for Windows, Curl, Gist.vim With Vundle (1)]]></title>
      <link href="https://vincenttam.github.io/blog/2016/02/22/git-for-windows-curl-gist-dot-vim-with-vundle-1/"/>
    
    <updated>2016-02-22T10:23:53+08:00</updated>
    <id>https://vincenttam.github.io/blog/2016/02/22/git-for-windows-curl-gist-dot-vim-with-vundle-1</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>I installed msysgit 1.9.0, and added its bash utilities to <code>PATH</code>.</p>

<h2 id="problem">Problem</h2>

<p>I attempted to open an HTML file with <code>curl</code>.  However, I got the
following error.</p>

<pre class="cli"><code>C:\Windows\system32\cmd.exe /c (curl 'http://www.vim.org/index.html' -o 'C:/Temp
/PortableApps/gVimPortable/Data/Temp/VIA1ED5.html')
curl: (1) Protocol "'http" not supported or disabled in libcurl
shell returned 1
Hit any key to close this window...
</code></pre>

<h2 id="discussion">Discussion</h2>

<p>In the first line of the code block, <code>cmd.exe</code> with option <code>/c</code> ran
the command in the parenthesis <code>()</code>.  I copied the command inside <code>()</code>
and ran it in <code>cmd.exe</code>, and the error was reproduced.</p>

<p>It’s easy to find the cause of the problem.  I typed “curl protocol”
on the Google search web page, and the rest of the error message
appeared in the list of suggestions.  In the first search result,
which was <a href="http://stackoverflow.com/q/6684235">a Stack Overflow question</a>, I learnt why this
error occurred from the first answer—in the Command Prompt, one
needs to use double quotes <code>""</code> instead of single quotes <code>''</code>.  In Git
Bash, this <em>doesn’t</em> matter.</p>

<p>Since <code>curl</code> was bundled with msysgit, I suspected that the installed
version of Git was too old.  I then upgraded it.</p>

<h2 id="lessons-learnt">Lessons learnt</h2>

<ol>
  <li>For a shell program (e.g. Command Prompt, bash), the option <code>-c</code>
(or <code>/c</code>) stands for “command”, and what’s left is the command to
be run.</li>
  <li><code>curl</code> will grab content from the input URL and display it as
standard output.  To save the downloaded content in a file, the
flag <code>-o</code>, which means “output”, can be used.</li>
</ol>

]]></content>
    
  </entry>
  
</feed>
