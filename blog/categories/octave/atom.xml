<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Octave | Blog 1]]></title>
  <link href="https://vincenttam.github.io/blog/categories/octave/atom.xml" rel="self"/>
  <link href="https://vincenttam.github.io/"/>
  <updated>2016-02-22T16:46:40+08:00</updated>
  <id>https://vincenttam.github.io/</id>
  <author>
    <name><![CDATA[Vincent Tam]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    
      <title type="html"><![CDATA[Generate $\rm \LaTeX$ Code for Octave Matrices]]></title>
      <link href="https://vincenttam.github.io/blog/2016/01/16/generate-latex-code-for-octave-matrices/"/>
    
    <updated>2016-01-16T15:33:39+08:00</updated>
    <id>https://vincenttam.github.io/blog/2016/01/16/generate-latex-code-for-octave-matrices</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<ul>
  <li><a href="http://math.stackexchange.com">Mathematics Stack Exchange</a> use <a href="https://daringfireball.net/projects/markdown/">Markdown</a> and <a href="https://mathjax.org/">MathJax</a> to
  typeset math expressions.</li>
  <li>I use <a href="https://www.gnu.org/software/octave">GNU Octave</a> to efficiently perform (matrix)
  calculations for a quick and correct response on Mathematics Stack
  Exchange.</li>
</ul>

<h2 id="problem">Problem</h2>

<p>Recently, I encountered a <a href="http://math.stackexchange.com/q/1614115/290189">linear algebra problem</a> on
Mathematics Stack Exchange.</p>

<p>For any given matrix $A$ in Octave,</p>

<pre class="cliUB"><code>A = [1 2 2; 2 3 4; 4 4 2]
A =

   1   2   2
   2   3   4
   4   4   2
</code></pre>

<p><strong>how can one generate its $\rm \LaTeX$ code</strong></p>

<p>{% codeblock $\rm \LaTeX$ code for matrix $A$ %}
A = \begin{bmatrix} 1&amp;2&amp;2\ 2&amp;3&amp;4\ 4&amp;4&amp;2 \end{bmatrix}
{% endcodeblock %}</p>

<p>so that one gets</p>

<div class="myeqn">
\[
  A = \begin{bmatrix} 1&amp;2&amp;2\\ 2&amp;3&amp;4\\ 4&amp;4&amp;2 \end{bmatrix}?
\]
</div>

<!-- more -->

<h2 id="solution">Solution</h2>

<p>I searched “octave to latex matrices” and I found <a href="http://tex.stackexchange.com/a/43733">this answer</a>
quite useful.  I issued the first command to see the result.</p>

<pre class="cliUB"><code>strrep(strrep(mat2str(A),",","&amp;"),";","\\\\\n")(2:end-1)
ans = 1 2 2\\
2 3 4\\
4 4 2
</code></pre>

<p>I suspected that it <em>didn’t</em> work.  I posted it as a comment and
verified that I was right.  To fix this, I extracted the function
<code>mat2str(A)</code> in the middle of this command to see the results.  From
its result (<code>ans = [1 2 2;2 3 4;4 4 2]</code>), I realised that <code>strrep</code>
standed for “string replace”.  Then, I changed the double-quoted comma
in the second argument of function <code>strrep</code> to a double-quoted
whitespace character, and got the anticipated result.</p>

<pre class="cliUB"><code>strcat("\\begin{bmatrix}\n",strrep(strrep(mat2str(A)," ","&amp;"), ...
";","\\\\\n")(2:end-1),"\n\\end{bmatrix}\n")
ans = \begin{bmatrix}
1&amp;2&amp;2\\
2&amp;3&amp;4\\
4&amp;4&amp;2
\end{bmatrix}
</code></pre>

<h2 id="inadequacies">Inadequacies</h2>

<p>I <em>don’t</em> know how to do this for matrices with fractions.  I think I
can work it out by searching and testing in several hours, but I
<em>don’t</em> have the time to do so.</p>

<h2 id="lessons-learnt">Lessons learnt</h2>

<h3 id="math">Math</h3>

<p>I revised some definitions in linear algebra.</p>

<ul>
  <li>A matrix $U$ is <strong>unitary</strong> iff $UU^\star = U^\star U = I$.</li>
  <li>A matrix $N$ is <strong>normal</strong> iff $NN^\star = N^\star N$.</li>
</ul>

<h3 id="gnu-octave">GNU Octave</h3>

<ul>
  <li>The function <code>strrep(str,"foo","bar")</code> replaces all instances of
  <code>foo</code> in <code>str</code> with <code>bar</code>.  It can be used in a nested manner for
  multiple replacements.</li>
  <li>The function <code>strcat(str1,str2,...)</code> concatenates the strings
  inside.</li>
</ul>

<h3 id="grep">Grep</h3>

<p>When I was writing this article, I wanted to search for “<a href="https://www.gnu.org/software/octave">octave</a>”
(with the square brackets “[]”) with <code>grep</code> inside <a href="http://www.vim.org/">Vim</a>, but I got
over 1270 results.  I tried adding single/double quotes and escaping
the square brackets with a backslash, but I faied again.  Finally, I
googled “grep escape character” for a solution.  Since then, I know
that I should <a href="http://stackoverflow.com/a/12387802/3184351">add the <code>-F</code> flag to <code>grep</code></a> to fix the
string.</p>

]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[Generate Simplex Tableaux With Octave]]></title>
      <link href="https://vincenttam.github.io/blog/2016/01/16/generate-simplex-tableaux-with-octave/"/>
    
    <updated>2016-01-16T14:53:15+08:00</updated>
    <id>https://vincenttam.github.io/blog/2016/01/16/generate-simplex-tableaux-with-octave</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>It’s easy that one makes <a href="http://chat.stackexchange.com/transcript/message/26730376#26730376">careless mistakes</a> in a pivot
operation.  As a result, in test/exams in which calculators are
allowed, I used a simple program to save time.</p>

<p>Answering linear programming question on
<a href="http://math.stackexchange.com">Mathematics Stack Exchange</a>, I used <a href="http://www.gnu.org/software/octave">GNU Octave</a> to
do the tedious work.</p>

<h2 id="initial-tableau">Initial tableau</h2>

<p>First write the LPP in standard form.  I assume that $b$ and $c$ are
column vectors.</p>

<ul>
  <li><code>c</code> is the objective function.</li>
  <li><code>A</code> is the coefficient matrix of the constraints.  (a.k.a technology
  matrix)</li>
  <li><code>b</code> is the RHS of the constraints.</li>
  <li><code>T0</code> is the initial tableau.</li>
</ul>

<p>My habit is to</p>

<ol>
  <li>place $b$ on the RHS;</li>
  <li>place the objective function row at the bottom;</li>
  <li>omit the coefficient for $z$ since it’ll <em>never</em> be changed.</li>
</ol>

<p>{% codeblock Generate the initial tableau lang:octave http://math.stackexchange.com/a/1605301/290189 %}
format rat;
c = [-1 2 -3 0 0 0]’; b = [11 0 8]’;
A = [
1 -.5 1 1 0 0;
0 2 -1 0 1 0;
0 0 0 2 0 1];
T0 = [A b; -c’ 0]
{% endcodeblock %}</p>

<h2 id="current-simplex-tableau">Current simplex tableau</h2>

<p>The command <code>basis = [3 2 6]</code> is used to choose the decision variables
<span class="myeqn">$x_3,x_2$ and $x_6$</span> as the
basis.  Note that the order of the entries in the array <code>basis</code> is
very <em>important</em>.  By setting this array, I <em>don’t</em> need to repeat
typing the same set of numbers for $B$ and <span class="myeqn">$c_B$</span>.</p>

<p>{% codeblock Generate the tableau from the current basis lang:octave http://math.stackexchange.com/a/1605301/290189 %}
basis = [3 2 6]; B = A(:,basis); cB = c(basis);
T = [B\A B\b; cB’<em>(B\A)-c’ cB’</em>(B\b)]
{% endcodeblock %}</p>

<h2 id="inadequacies">Inadequacies</h2>

<p>Since I’m no longer in an LP course, I’m too lazy to write the code
for finding the suitable elements for a pivot operation.  We <em>don’t</em>
need to re-develop something that has been well-developed.</p>

]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[Distribution of User Reputation on Math Stack Exchange]]></title>
      <link href="https://vincenttam.github.io/blog/2016/01/07/distribution-of-user-reputation-on-math-stack-exchange/"/>
    
    <updated>2016-01-07T17:34:38+08:00</updated>
    <id>https://vincenttam.github.io/blog/2016/01/07/distribution-of-user-reputation-on-math-stack-exchange</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>Recently, I post math on <a href="http://math.stackexchange.com">Mathematics Stack Exchange</a> instead
of here.</p>

<h2 id="problem">Problem</h2>

<p>How can one get a table for the distribution of reputation on that
site?</p>

<h2 id="solution">Solution</h2>

<p>Write a SQL query on <a href="http://data.stackexchange.com">Stack Exchange Data Explorer</a>.</p>

<p>{% codeblock User’s Total Reputation Distribution lang:sql http://goo.gl/Kqwepp %}
select u.range as [prev row &lt;= Reputation &lt;= this row], count(*) as [Users]
from (
    select case
    when Reputation between 1 and 4 then 4
    when Reputation between 5 and 9 then 9
    when Reputation between 10 and 14 then 14
    when Reputation between 15 and 19 then 19
    when Reputation between 20 and 49 then 49
    when Reputation between 50 and 74 then 74
    when Reputation between 75 and 99 then 99
    when Reputation between 100 and 124 then 124
    when Reputation between 125 and 249 then 249
    when Reputation between 250 and 499 then 499
    when Reputation between 500 and 999 then 999
    when Reputation between 1000 and 1999 then 1999
    when Reputation between 2000 and 2499 then 2499
    when Reputation between 2500 and 2999 then 2999
    when Reputation between 3000 and 4999 then 4999
    when Reputation between 5000 and 9999 then 9999
    when Reputation between 10000 and 14999 then 14999
    when Reputation between 15000 and 19999 then 19999
    when Reputation between 20000 and 24999 then 24999
    else 400000 end as range
        from Users) u
    group by u.range
{% endcodeblock %}</p>

<p>The indentation is automatically done by <a href="http://www.vim.org">Vim</a>.  I know that the
syntax is <em>ugly</em>.  If I assign text string to the column <code>u.range</code>,
then the table is sorted in <em>alphabetical order</em> of that column
instead of numerical order.  This <em>doesn’t</em> make sense.  Therefore, I
use a dirty way to get the statistics, and played with the built-in
graphing function.  However, the visual result <em>isn’t</em> so
satisfactory.</p>

<p>{% img fancybox /images/posts/MathSE/reputation985.png 300 ‘Reputation v.s. Users on Math Stack Exchange’ ‘MathSE reputation statistics’ %}</p>

<p>Anyone who has completed high school will realise that a log graph is
better.  Asking for this feature on <a href="http://meta.stackexchange.com">Meta Stack Exchange</a>
takes time.  I believe that such feature request will be rejected by
the moderator to reduce the workload of Stack Exchange company.
Therefore, I plot the log graph using <a href="https://www.gnu.org/software/octave">GNU Octave</a>.</p>

<ol>
  <li>Download the CSV file to get the data.</li>
  <li>Change it to an GNU Octave script file.</li>
  <li>Open it using Vim.</li>
  <li>Do the necessary text substitutions so that the data becomes a
matrix.</li>
  <li>Complete the script file by adding the plot commands.
    <ul>
      <li><a href="https://www.gnu.org/software/octave/doc/interpreter/Two_002dDimensional-Plots.html">Line format arguments</a></li>
      <li><a href="http://stackoverflow.com/a/22822575/3184351">Add coordinates to points</a></li>
    </ul>
  </li>
</ol>

<p>{% include_code The source code for the log plot lang:octave mathse-rep.m %}</p>

<p>I choose <code>loglog</code> because <code>semilogx</code> causes the labels on tail to
overlap.  Here’s the results.</p>

<picture class="fancybox" title="Target log graph">
  <source srcset="/images/posts/MathSE/loglog1215.svg" media="(min-width: 800px)" />
  <img alt="Target log graph" width="300" src="https://vincenttam.github.io/images/posts/MathSE/loglog576.svg" />
</picture>

<h2 id="lessons-learnt">Lessons learnt</h2>

<p>I can save plots in GNU Octave as a SVG file.  I know this after
searching “octave export svg”.  From
<a href="https://www.gnu.org/software/octave/doc/interpreter/Printing-and-Saving-Plots.html"><em>Printing and Saving Plots</em></a>, I see <code>print -d[device]</code>,
in which one can substitute the output format.  For example, I used
<code>print -dsvg</code> to generate the SVG’s shown above.</p>

]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[Got a Warning From Octave]]></title>
      <link href="https://vincenttam.github.io/blog/2015/12/28/got-a-warning-from-octave/"/>
    
    <updated>2015-12-28T23:11:59+08:00</updated>
    <id>https://vincenttam.github.io/blog/2015/12/28/got-a-warning-from-octave</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>To verify <a href="http://math.stackexchange.com/q/1591435">the inequality</a></p>

<div class="myeqn">
\[
  \left(\sqrt{\frac{a+b}{c}}+\sqrt{\frac{b+c}{a}}+\sqrt{\frac{c+a}{b}}
  \right)^2\ge\frac{16}{3(a+b)(b+c)(c+a)}
\]
</div>

<p>found on Math Stack Exchange, I wrote the following Octave script.</p>

<p>{% include_code A small script to verify the inequality lang:octave test.m %}</p>

<h2 id="problem">Problem</h2>

<p>The above script did the calculations, but <em>a warning message
appeared</em>.</p>

<pre class="cliUB"><code>$ octave -q test.m
warning: function ./test.m shadows a core library function
A =  0.60000
B =  0.24101
C =  31.975
ans =  24.691
</code></pre>

<p><strong>How can I run this script without the warning?</strong></p>

<!-- more -->

<h2 id="solution">Solution</h2>

<p>Change the file name of the script to an uncommon name.</p>

<pre class="cliUB"><code>$ mv test.m test1.m
$ octave -q test1.m
A =  0.60000
B =  0.24101
C =  31.975
ans =  24.691
</code></pre>

]]></content>
    
  </entry>
  
</feed>
