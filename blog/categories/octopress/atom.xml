<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Octopress | Blog 1]]></title>
  <link href="http://vincenttam.github.io/blog/categories/octopress/atom.xml" rel="self"/>
  <link href="http://vincenttam.github.io/"/>
  <updated>2015-01-12T22:11:16+08:00</updated>
  <id>http://vincenttam.github.io/</id>
  <author>
    <name><![CDATA[Vincent Tam]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    
      <title type="html"><![CDATA[Octopress, PageSpeed, jQuery and fancyBox]]></title>
      <link href="http://vincenttam.github.io/blog/2014/12/29/octopress-pagespeed-jquery-and-fancybox/"/>
    
    <updated>2014-12-29T16:17:52+08:00</updated>
    <id>http://vincenttam.github.io/blog/2014/12/29/octopress-pagespeed-jquery-and-fancybox</id>
    
      <content type="html"><![CDATA[<h2 id="goal">Goal</h2>

<p>To improve the <a href="https://developers.google.com/speed/pagespeed/">Google PageSpeed</a> scores of this site.</p>

<h2 id="background">Background</h2>

<p>I use <a href="http://www.mathjax.org">MathJax</a> and <a href="http://fancyapps.com/fancybox/">fancyBox</a> for displaying math equations and
images respectively.</p>

<h2 id="problem">Problem</h2>

<p>As shown in the following two pictures, the <a href="https://developers.google.com/speed/pagespeed/">PageSpeed</a> scores of the
homepage of this blog for “Mobile” and “Desktop” were very <em>low</em>.</p>

<picture class="fancybox center" title="PageSpeed score for &quot;Mobile&quot;">
  <source srcset="/images/posts/PageSpeed/m_score1.png" media="(min-width: 980px)" />
  <img alt="pagespeed score mobile" src="http://vincenttam.github.io/images/posts/PageSpeed/m_score1_s.png" />
</picture>

<picture class="fancybox center" title="PageSpeed score for &quot;Desktop&quot;">
  <source srcset="/images/posts/PageSpeed/d_score1.png" media="(min-width: 650px)" />
  <img alt="pagespeed score desktop" src="http://vincenttam.github.io/images/posts/PageSpeed/d_score1_s.png" />
</picture>

<h2 id="solution">Solution</h2>

<p>I followed the advice of Google Developers, and deferred loading of
JavaScripts.</p>

<h3 id="results">Results</h3>

<p>After a week’s work, the PageSpeed has risen.</p>

<p><img class="fancybox center" src="/images/posts/PageSpeed/m_score3.png" title="‘PageSpeed score for Mobile’ ‘mobile pagespeed score’" ></p>

<picture class="fancybox center" title="PageSpeed score for &quot;Desktop&quot;">
  <source srcset="/images/posts/PageSpeed/d_score3.png" media="(min-width: 360px)" />
  <img alt="pagespeed score desktop" src="http://vincenttam.github.io/images/posts/PageSpeed/d_score3_s.png" />
</picture>

<!-- more -->

<h3 id="html-headers">HTML Headers</h3>

<p>I removed render-blocking JavaScripts and stylesheets in the HTML
Headers.</p>

<ol>
  <li>Deleted all <code>&lt;script&gt;</code> and <code>&lt;link rel="stylesheet" ... /&gt;</code> tags in
<code>source/_includes/custom/head.html</code>, <em>except</em> <code>&lt;link
src="http://vincenttam.github.io/stylesheets/print.css" ... /&gt;</code>.</li>
  <li>Deleted the lines which loads <a href="http://jquery.com">jQuery</a>, <a href="http://modernizr.com">Modernizr</a>,
<code>/javascripts/octopress.js</code> and <code>/stylesheets/screen.css</code>.</li>
</ol>

<p><figure class='code'><figcaption><span>Lines to be removed from the default HTML head </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;/stylesheets/screen.css&quot;</span> <span class="na">media=</span><span class="s">&quot;screen, projection&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;/javascripts/modernizr-2.0.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script&gt;</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">unescape</span><span class="p">(</span><span class="s1">&#39;%3Cscript</span>
</span><span class='line'><span class="s1">src=&quot;http://vincenttam.github.io/javascripts/libs/jquery.min.js&quot;%3E%3C/script%3E&#39;</span><span class="p">))</span><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;/javascripts/octopress.js&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<h3 id="combine-and-compress-fancybox-javascripts">Combine and compress fancyBox JavaScripts</h3>

<p>I used the online JavaScript compressor at <a href="http://jscompress.com">http://jscompress.com</a>.
First, I clicked the “Upload Javascript Files” tabbed pane.  After
that, uploaded the three JavaScripts for fancyBox helpers:<sup id="fnref:nowheel"><a href="#fn:nowheel" class="footnote">1</a></sup></p>

<ol>
  <li><code>/fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.5</code></li>
  <li><code>/fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.6</code></li>
  <li><code>/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.7</code></li>
</ol>

<p>I then downloaded the compressed output.</p>

<h3 id="after-the-html-footer">After the HTML footer</h3>

<p>To load the scripts, especially Google hosted jQuery (or a local copy
of it in case that the remote library <em>can’t</em> load) and <a href="http://fancyapps.com/fancybox/">fancyBox</a>,
and the stylesheets after the contents in the <code>&lt;body&gt;</code> tag has been
loaded, I added the following lines to
<code>source/_includes/custom/after_footer.html</code>.</p>

<p><figure class='code'><figcaption><span>Defer loading of JavaScripts and stylesheets </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="c1">// For loading JavaScripts</span>
</span><span class='line'><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">function</span> <span class="nx">getScript</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="nx">success</span><span class="p">){</span>
</span><span class='line'>	<span class="kd">var</span> <span class="nx">script</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">);</span>
</span><span class='line'>	<span class="nx">script</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">url</span><span class="p">;</span>
</span><span class='line'>	<span class="kd">var</span> <span class="nx">head</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
</span><span class='line'>	<span class="nx">done</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span>
</span><span class='line'>	<span class="nx">script</span><span class="p">.</span><span class="nx">onload</span><span class="o">=</span><span class="nx">script</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>	<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">done</span> <span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="s1">&#39;loaded&#39;</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="s1">&#39;complete&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>	    <span class="nx">done</span><span class="o">=</span><span class="kc">true</span><span class="p">;</span>
</span><span class='line'>	    <span class="nx">success</span><span class="p">();</span>
</span><span class='line'>	    <span class="nx">script</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">script</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span><span class='line'>	    <span class="nx">head</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">script</span><span class="p">);</span>
</span><span class='line'>	<span class="p">}</span>
</span><span class='line'>	<span class="p">};</span>
</span><span class='line'>	<span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">script</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span><span class="nt">&lt;/script&gt;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;pre&gt;&lt;code&gt;</span>// Any scripts independent of jQuery
</span><span class='line'>getScript(&quot;/javascripts/modernizr-2.0.js&quot;,function() {});
</span><span class='line'>getScript(&quot;https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;+
</span><span class='line'>&quot;,https://vincenttam.github.io/javascripts/MathJaxLocal.js&quot;,function() {});
</span><span class='line'>
</span><span class='line'>// Google hosted jquery and fancyBox JavaScripts
</span><span class='line'>getScript(&quot;//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js&quot;,function(){
</span><span class='line'>  getScript(&quot;/javascripts/octopress.js&quot;,function() {});
</span><span class='line'>  getScript(&quot;/fancybox/source/jquery.fancybox.pack.js?v=2.1.5&quot;, function() {
</span><span class='line'>getScript(&quot;/fancybox/source/helpers/all.js&quot;, function() {
</span><span class='line'>  getScript(&quot;/javascripts/FancyBoxLocal.js&quot;, function() {});
</span><span class='line'>  });
</span><span class='line'>});
</span><span class='line'>  });
</span><span class='line'>
</span><span class='line'>// jquery fallback local copy and fancyBox JavaScripts
</span><span class='line'>window.onload = function() {
</span><span class='line'>  if (typeof jQuery == &quot;undefined&quot;) {
</span><span class='line'>var jqri = document.createElement(&quot;script&quot;);
</span><span class='line'>jqri.src = &quot;/javascripts/libs/jquery.min.js&quot;;
</span><span class='line'>jqri.type = &quot;text/javascript&quot;;
</span><span class='line'>document.body.appendChild(jqri);
</span><span class='line'>jqri. onload = function () {
</span><span class='line'>  var fbjs = document.createElement(&quot;script&quot;);
</span><span class='line'>  fbjs.src = &quot;/fancybox/source/jquery.fancybox.pack.js?v=2.1.5&quot;;
</span><span class='line'>  fbjs.type = &quot;text/javascript&quot;;
</span><span class='line'>  document.body.appendChild(fbjs);
</span><span class='line'>  var fball = document.createElement(&quot;script&quot;);
</span><span class='line'>  fball.src = &quot;./octopress/source/fancybox/source/helpers/all.js&quot;;
</span><span class='line'>  fball.type = &quot;text/javascript&quot;;
</span><span class='line'>  document.body.appendChild(fball);
</span><span class='line'>  fbjs.onload = function () {
</span><span class='line'>    fball.onload = function () {
</span><span class='line'>      var fblocjs = document.createElement(&quot;script&quot;);
</span><span class='line'>      fblocjs.src = &quot;/javascripts/FancyBoxLocal.js&quot;;
</span><span class='line'>      fblocjs.type = &quot;text/javascript&quot;;
</span><span class='line'>      document.body.appendChild(fblocjs);
</span><span class='line'>    }
</span><span class='line'>  }
</span><span class='line'>}
</span><span class='line'>  }
</span><span class='line'>} })();
</span><span class='line'><span class="nt">&lt;/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>// For loading CSS files
</span><span class='line'>var cb = function() {
</span><span class='line'>  var h = document.getElementsByTagName(‘head’)[0];<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>// Fonts from Google’s Web font directory
</span><span class='line'>  var font1 = document.createElement(“link”);
</span><span class='line'>  font1.href = “//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic”;
</span><span class='line'>  font1.rel = “stylesheet”;
</span><span class='line'>  font1.type = “text/css”;
</span><span class='line'>  h.parentNode.insertBefore(font1, h);<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>var font2 = document.createElement(“link”);
</span><span class='line'>  font2.href = “//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic”;
</span><span class='line'>  font2.rel = “stylesheet”;
</span><span class='line'>  font2.type = “text/css”;
</span><span class='line'>  h.parentNode.insertBefore(font2, h);<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>// any other external CSS<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>// CSS files for FancyBox
</span><span class='line'>  var fbcss = document.createElement(“link”);
</span><span class='line'>  fbcss.href = “/fancybox/source/jquery.fancybox.css?v=2.1.5”;
</span><span class='line'>  fbcss.rel = “stylesheet”;
</span><span class='line'>  fbcss.type = “text/css”;
</span><span class='line'>  fbcss.media = “screen, projection”;
</span><span class='line'>  document.body.appendChild(fbcss);
</span><span class='line'>  var fbbtncss = document.createElement(“link”);
</span><span class='line'>  fbbtncss.href = “/fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.5”;
</span><span class='line'>  fbbtncss.rel = “stylesheet”;
</span><span class='line'>  fbbtncss.type = “text/css”;
</span><span class='line'>  fbbtncss.media = “screen, projection”;
</span><span class='line'>  document.body.appendChild(fbbtncss);
</span><span class='line'>  var fbthmcss = document.createElement(“link”);
</span><span class='line'>  fbthmcss.href = “/fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.7”;
</span><span class='line'>  fbthmcss.rel = “stylesheet”;
</span><span class='line'>  fbthmcss.type = “text/css”;
</span><span class='line'>  fbthmcss.media = “screen, projection”;
</span><span class='line'>  document.body.appendChild(fbthmcss);
</span><span class='line'>};<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>var raf = requestAnimationFrame || mozRequestAnimationFrame ||
</span><span class='line'>    webkitRequestAnimationFrame || msRequestAnimationFrame;
</span><span class='line'>if (raf) raf(cb);
</span><span class='line'>else window.addEventListener(‘load’, cb);
</span><span class='line'><span class="ni">&amp;lt;</span>/script<span class="ni">&amp;gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<h3 id="improve-user-experience">Improve user experience</h3>

<p>Google PageSpeed Insights said that my homepage was too <em>wide</em> for
mobile devices whose width were 320 px.  Therefore, I’ve tried
preparing different pictures for windows of different width by
<code>&lt;picutre&gt;</code> tags with <code>&lt;source srcset=...&gt;</code> inside.  Although this
pure HTML 5 approach is now supported in Google Chrome <em>only</em>, I find
this method simple and beautiful.<sup id="fnref:pic_elt"><a href="#fn:pic_elt" class="footnote">2</a></sup>  Due to its elegance, I
believe that this feature will soon be implemented in all major
browsers, such as Mozilla Firefox.</p>

<p><figure class='code'><figcaption><span>Part of pages/posts contents </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;picture</span> <span class="na">class=</span><span class="s">&quot;fancybox center&quot;</span> <span class="na">title=</span><span class="s">&quot;Custom search failed&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;source</span> <span class="na">srcset=</span><span class="s">&quot;/images/big.png&quot;</span> <span class="na">media=</span><span class="s">&quot;(min-width: 880px)&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="c">&lt;!-- a fallback for browsers that don&#39;t support the source tag --&gt;</span>
</span><span class='line'>  <span class="nt">&lt;img</span> <span class="na">alt=</span><span class="s">&quot;alt text&quot;</span> <span class="na">src=</span><span class="s">&quot;http://vincenttam.github.io/images/small.png&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/picture&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>The simplest way to avoid getting the message “Optimize images” in a
PageSpeed test is to optimize the images.  <a href="http://optipng.sourceforge.net/">OptiPNG</a> can be used for
this.  Before compressing the images, I issued the following command
to create a diminished image of width 300 px of the original image.</p>

<pre class="cliUB"><code>$ optipng big.png
$ convert big.png -resize 300 small.png
$ optipng small.png
</code></pre>

<p>How to enable fancyBox for <code>&lt;picture&gt;</code> elements?  I did a bit of
“guided coding” — I copied Erv Walter’s function and changed a few
lines.<sup id="fnref:erv"><a href="#fn:erv" class="footnote">3</a></sup></p>

<p><figure class='code'><figcaption><span>Part of my “/javascripts/FancyBoxLocal.js” </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="err">‘</span><span class="p">.</span><span class="nx">entry</span><span class="o">-</span><span class="nx">content</span><span class="err">’</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">_i</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="err">‘</span><span class="nx">img</span><span class="p">.</span><span class="nx">fancybox</span><span class="err">’</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>      <span class="c1">// Erv Walter’s function …</span>
</span><span class='line'>    <span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;picture.fancybox&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">picture</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">picture</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">picture</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;fancybox&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">picture</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;srcset&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">picture</span><span class="p">.</span><span class="nx">wrap</span><span class="p">(</span><span class="s1">&#39;&amp;lt;a href=&quot;&#39;</span><span class="o">+</span><span class="nx">url</span><span class="o">+</span><span class="s1">&#39;&quot; class=&quot;fancybox&quot; rel=&quot;galleryp&#39;</span><span class="o">+</span><span class="nx">_i</span><span class="o">+</span><span class="s1">&#39;&quot; /&amp;gt;&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">title</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'><span class="nx">picture</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="nx">title</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>   <span class="p">});</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="c1">// settings found on fancyBox’s homepage …</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>View the file at commit <a href="https://github.com/VincentTam/vincenttam.github.io/commit/29d86dd">29d86dd</a> for a working example.</p>

<p>Lastly, to ensure that the contents <em>wouldn’t</em> fall outside the
viewport on the screen of mobile devices, I embedded an inline CSS.</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;/p&gt;</span>
</span><span class='line'><span class="nt">&lt;style&gt;article</span> <span class="nt">img</span> <span class="p">{</span><span class="k">max-width</span><span class="o">:</span><span class="m">100%</span><span class="p">;}</span><span class="nt">&lt;/style&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Though this <em>wasn’t</em> good, it enabled me to get rid of the above
message about image optimization in a PageSpeed test.</p>

<h2 id="lessons-learnt">Lessons learnt</h2>

<h3 id="my-first-way-to-load-javascripts-from-a-script">My first way to load JavaScripts from a script</h3>

<p>Due to my homework and exams in early December and my <em>limited
knowledge</em> on JavaScripts, I <em>didn’t</em> have time to understand the
section “Defer loading of JavaScript” in
<a href="https://developers.google.com/speed/docs/insights/BlockingJS">a suggestion page on Google Developers</a>.  On Dec 20,
2014, I found an article on feedthebot useful.<sup id="fnref:feedthebot"><a href="#fn:feedthebot" class="footnote">4</a></sup>  I copied
the codeblock and changed <code>defer.js</code> to other files.</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="kd">function</span> <span class="nx">downloadJSAtOnload</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;script&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">element</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s2">&quot;defer.js&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">)</span>
</span><span class='line'>  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="nx">downloadJSAtOnload</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</span><span class='line'><span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">)</span>
</span><span class='line'>  <span class="nb">window</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span><span class="s2">&quot;onload&quot;</span><span class="p">,</span> <span class="nx">downloadJSAtOnload</span><span class="p">);</span>
</span><span class='line'><span class="k">else</span> <span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">downloadJSAtOnload</span><span class="p">;</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>In M$ I.E., one has to use <code>window.attachEvent</code> instead of
<code>window.addEventListener</code>.  The last line acts as a fallback for old
browsers.</p>

<p>This works for MathJax.  However, for fancyBox, which depends on
jQuery, strange things happened, and I got trapped for two days.  I
had wrote a function which worked in Google Chrome, but when I opened
Mozilla Firefox to test the results, <em>no</em> box popped out and I was
taken to a page containing merely the picture.  I was puzzled and made
a Git commit.<sup id="fnref:e7e6743"><a href="#fn:e7e6743" class="footnote">5</a></sup></p>

<h3 id="my-second-way-to-load-javascripts-from-a-script">My second way to load JavaScripts from a script</h3>

<p>I googled “defer jquery fancybox”, and found a question on Stack
Overflow.<sup id="fnref:so16647050"><a href="#fn:so16647050" class="footnote">6</a></sup>  I made use of Jamed Donnelly’s functions, and
had successfully made a popped up image, which meant that the loading
of JavaScripts for fancyBox had been deferred.</p>

<p><figure class='code'><figcaption><span>Just before the closing body tag </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">function</span> <span class="nx">getScript</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="nx">success</span><span class="p">){</span>
</span><span class='line'>	<span class="kd">var</span> <span class="nx">script</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">);</span>
</span><span class='line'>	<span class="nx">script</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">url</span><span class="p">;</span>
</span><span class='line'>	<span class="kd">var</span> <span class="nx">head</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
</span><span class='line'>	<span class="nx">done</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span>
</span><span class='line'>	<span class="nx">script</span><span class="p">.</span><span class="nx">onload</span><span class="o">=</span><span class="nx">script</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>	<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">done</span> <span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="s1">&#39;loaded&#39;</span>
</span><span class='line'>	  <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="s1">&#39;complete&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>	    <span class="nx">done</span><span class="o">=</span><span class="kc">true</span><span class="p">;</span>
</span><span class='line'>	    <span class="nx">success</span><span class="p">();</span>
</span><span class='line'>	    <span class="nx">script</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">script</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span><span class='line'>	    <span class="nx">head</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">script</span><span class="p">);</span>
</span><span class='line'>	<span class="p">}</span>
</span><span class='line'>	<span class="p">};</span>
</span><span class='line'>	<span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">script</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span><span class="nt">&lt;/script&gt;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>getScript(“jquery-1.8.3.min.js”,function(){
</span><span class='line'>    getScript(“jquery.fancybox-1.3.4/fancybox/jquery.fancybox-1.3.4.pack.js”, function() {});
</span><span class='line'>    getScript(“myCustomScript.js”, function() {});
</span><span class='line'>});<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>})();
</span><span class='line'><span class="ni">&amp;lt;</span>/script<span class="ni">&amp;gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p><figure class='code'><figcaption><span>A separate file “myCustomScript.js” </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="err">“</span><span class="p">.</span><span class="nx">example3</span><span class="err">”</span><span class="p">).</span><span class="nx">fancybox</span><span class="p">({</span>
</span><span class='line'>	<span class="err">‘</span><span class="nx">transitionIn</span><span class="err">’</span>  <span class="o">:</span> <span class="err">‘</span><span class="nx">none</span><span class="err">’</span><span class="p">,</span>
</span><span class='line'>	<span class="err">‘</span><span class="nx">transitionOut</span><span class="err">’</span> <span class="o">:</span> <span class="err">‘</span><span class="nx">none</span><span class="err">’</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Nonetheless, the image title and the close icon were <em>missing</em>.</p>

<h3 id="view-loaded-resources-and-the-timeline">View loaded resources and the timeline</h3>

<p>I had tried using “Network” in the developer toolbar in both Google
Chromium and Mozilla Firefox to view the time taken for loading the
scripts and CSS files.  I contrasted the timelines of working sites
and my failed trials, and then made changes to the above script before
the <code>&lt;/body&gt;</code> tag.</p>

<h3 id="test-javascript-functions-using-the-web-console">Test Javascript functions using the web console</h3>

<p>While testing the script in
<code>source/_includes/custom/after_footer.html</code>, the scripts often
<em>failed</em> to work.  The error console in web browsers spotted out the
missing brackets and other syntax errors.  Moreover, it told me
whether jQuery had been loaded if I typed <code>typeof jQuery</code>.</p>

<h3 id="access-the-children-of-an-html-element-with-jquery">Access the children of an HTML element with jQuery</h3>

<p>While writing the anonymous function in
<code>/javascripts/FancyBoxLocal.js</code>, I tried to extract the URL of the
<code>&lt;source&gt;</code> element inside a <code>&lt;picture&gt;</code> element.  In the web console,
if <code>typeof jQuery</code> returns <code>"function"</code>,
<code>$('picture').children('source').length</code> returns a non-negative
integer.  If the integer returned is positive,
<code>$('picture').children('source')[0].srcset</code> returns
<code>"/images/foo.png"</code> and <code>"undefined"</code> in Google Chromium and Mozilla
Firefox respectively.</p>

<p>I played with the example on W3Schools about the <code>children()</code> method
in jQuery.<sup id="fnref:w3sch"><a href="#fn:w3sch" class="footnote">7</a></sup>  After re-writing the code and seeing the result
repeatedly, I’ve learnt to use the <code>eq(n)</code> and <code>attr(source)</code> methods
to access the <code>n</code>-th element and the <code>source</code> attribute.</p>

<h3 id="load-css-files-from-a-script">Load CSS files from a script</h3>

<p>Google Developers has already provided a script for doing
so.<sup id="fnref:goo_dev_css"><a href="#fn:goo_dev_css" class="footnote">8</a></sup>  At first, I <em>didn’t</em> understand it and I tried
injecting a <code>&lt;link&gt;</code> element inside the <code>downloadJSAtOnload()</code> method.
Unluckily, this method <em>failed</em>.  <em>Without</em> <code>/stylesheets/screen.css</code>,
the Solarized theme <em>disappeared</em>, and was “replaced by a
black-and-white theme”.  After that, I re-read Google’s page on CSS
delivery optimization, and extracted the script which grabbed external
stylesheets.</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">cb</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;link&#39;</span><span class="p">);</span> <span class="nx">l</span><span class="p">.</span><span class="nx">rel</span> <span class="o">=</span> <span class="s1">&#39;stylesheet&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">l</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s1">&#39;small.css&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">h</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span> <span class="nx">h</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">h</span><span class="p">);</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">raf</span> <span class="o">=</span> <span class="nx">requestAnimationFrame</span> <span class="o">||</span> <span class="nx">mozRequestAnimationFrame</span> <span class="o">||</span>
</span><span class='line'>      <span class="nx">webkitRequestAnimationFrame</span> <span class="o">||</span> <span class="nx">msRequestAnimationFrame</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">raf</span><span class="p">)</span> <span class="nx">raf</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
</span><span class='line'>  <span class="k">else</span> <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="nx">cb</span><span class="p">);</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>From “Network” in the web developer toolbar, in an up-to-date version
of modern browsers, this anonymous function which loads external CSS
files should be executed <em>before</em> <code>script.onload</code> and <code>window.onload</code>.</p>

<p>In addition, unlike Javascripts, I <em>don’t</em> use something like
<code>stylesheet.onload</code>.  Simply put the relative path or URL of the
external CSS files inside the anonymous function will do.</p>

<p>After I grabbed the stylesheets before the external Javascripts
loaded, the missing components of the pop up window were <em>still</em>
missing.  It took me half an hour to figure out that <code>l.rel =
'stylesheet'</code> <em>couldn’t</em> be omitted.  I then pushed commit <a href="https://github.com/VincentTam/vincenttam.github.io/commit/1d40cea">1d40cea</a>
to GitHub and claimed that I’d found a way for both Google Chrome and
Mozilla Firefox.</p>

<p>The next day, I tested it with M$ I.E., and older versions of Google
Chrome and Mozilla Firefox.  In older versions, my configurations had
<em>failed</em>, but they worked fine in the recent ones.  For example, the
method of loading external Javascripts in a non-render-blocking manner
as suggested by Google Developers <em>didn’t</em> work in Mozilla Firefox 14,
which <em>didn’t</em> support <code>requestAnimationFrame</code>.  Though
<code>mozRequestAnimationFrame</code> was supported, if they’re put together, the
whole thing would collapse.  Since I’m <em>not</em> a web
designer/programmer, I <em>won’t</em> consider fixing this problem since</p>

<ul>
  <li>the old versions of browsers will be eventually upgraded, and more
  importantly,</li>
  <li>I’ve other (non-technical) problems to solve.</li>
</ul>

<h3 id="onload-and-createelement">Onload and createElement()</h3>

<p>I’ve read a question on Stack Overflow, and understood that even
though a <code>&lt;script&gt;</code> element with the <code>src='/javascripts/foo.js'</code>
attribute had been created by the <code>createElement()</code> function, the
functions defined in the external script <code>/javascripts/foo.js</code> could
be <em>unusable</em> if one <em>doesn’t</em> make proper use of <code>script.onload</code>.</p>

<h3 id="a-fallback-for-google-hosted-jquery">A fallback for Google hosted jQuery</h3>

<p>In my opinion, this is the <em>most</em> difficult part, which has taken me a
<em>whole</em> day.</p>

<p>I observed that loading <em>both</em> the local and remote copy of jQuery was
<em>incorrect</em>.  Since jQuery is relatively <em>large</em>, leaving this problem
unsolved is like leaving a black dot on a whiteboard.</p>

<p>One <em>can’t</em> simply remove the local copy of jQuery since Google is
<em>blocked</em> in some regions.<sup id="fnref:news"><a href="#fn:news" class="footnote">9</a></sup>  There’re some political reasons
behind.  Unlike Zigang Xiao’s blog, I’m <em>not</em> going to write any
articles on politics.<sup id="fnref:po"><a href="#fn:po" class="footnote">10</a></sup>  I’ll just seek a <em>technical</em> solution to
this <em>political</em> problem.</p>

<p>This problem is <em>extremely difficult</em> for me since I’m <em>not</em> a student
of IT, and there’s <em>no</em> direct solution from the Internet.  Inside and
outside the function triggered by an <code>onload</code> event, code <em>aren’t</em>
executed sequencially, but <em>in parallel</em>.  Therefore, if I put <code>if
(typeof jQuery == 'undefined')</code> after <code>getScript(...)</code>, then even
though the Google hosted jQuery library can be downloaded, the if
statement returns <em>true</em>.  Google Chromium and Mozilla Firefox showed
<em>different</em> results for the <em>same</em> JavaScript.  This increased the
difficulty of the task.</p>

<p>While coming up with a solution, I looked at
<code>source/_includes/head.html</code>, and found the following line.</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script&gt;</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">unescape</span><span class="p">(</span><span class="s1">&#39;%3Cscript</span>
</span><span class='line'><span class="s1">src=&quot;./javascripts/libs/jquery.min.js&quot;%3E%3C/script%3E&#39;</span><span class="p">))</span><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p><em>Not</em> being familiar with JavaScript syntax, I searched for the
meaning of the <code>unescape()</code> function and that of the ‘.’ in front of
<code>/javascripts/...</code>.  After viewing a question on Stack Overflow, I
decided to create the <a href="https://github.com/imathis/octopress/pull/1699/" title="Fix the way of loading the local copy of jQuery">pull request #1699</a> of Octopress.
Luckily, it was accepted and merged into the <code>master</code> branch of
Octopress.</p>

<p>After doing some off-topic stuff, I curiously reproduced the error
described in the first subsection of this section, and figured out a
way to fix this error.  During the process, I’ve learnt the dependence
of difference scripts  Therefore, the correct sequence should be</p>

<ol>
  <li>Load <code>jquery.min.js</code>.</li>
  <li>Load <code>octopress.js</code> and <code>/fancybox/source/jquery.fancybox.js</code>.</li>
  <li>Load <code>/fancybox/source/helpers/jquery.fancybox-*.js</code>.</li>
  <li>Load <code>FancyBoxLocal.js</code>.</li>
</ol>

<p>For example, <code>appendChild(octopress)</code> should be <em>inside</em>
<code>jquery.onload = function() {...}</code>.</p>

<p>Finally, using “Network” in the web developer toolbar in Google
Chromium, I observed that <em>before</em> the <code>window.onload</code> event, the
<code>getScript(...)</code> method had already got the scripts.  I combined the
two ways, and solved the problem.</p>

<hr />

<div class="footnotes">
  <ol>
    <li id="fn:nowheel">

      <p>I <em>didn’t</em> use the mousewheel plugin.  If one uses a mouse click
to get the popped up window, then he/she can also view the
next/previous picture with a click. <a href="#fnref:nowheel" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:pic_elt">

      <p>See, for example,
<a href="http://www.html5rocks.com/en/tutorials/responsive/picture-element/"><em>Built-in Browser Support for Responsive Images</em></a> by Pearl
Chen on HTML 5 Rocks, for an introduction to the <code>&lt;picture&gt;</code>
element. <a href="#fnref:pic_elt" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:erv">

      <p>See <a href="http://www.ewal.net/2012/09/08/octopress-customizations/"><em>Octopress Customizations</em></a> by Erv Walter on ewal.net. <a href="#fnref:erv" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:feedthebot">

      <p><a href="http://www.feedthebot.com/pagespeed/defer-loading-javascript.html"><em>Defer Loading Javascript</em></a> by Patrick Sexton on
feedthebot. <a href="#fnref:feedthebot" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:e7e6743">
      <p>See commit <a href="https://github.com/VincentTam/vincenttam.github.io/commit/e7e6743">e7e6743</a> for details. <a href="#fnref:e7e6743" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:so16647050">

      <p>See <a href="http://stackoverflow.com/q/16647050"><em>How to defer javascript</em></a> on Stack Overflow for
the function. <a href="#fnref:so16647050" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:w3sch">

      <p>The online example is available at
<a href="http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_children2">http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_children2</a> <a href="#fnref:w3sch" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:goo_dev_css">

      <p>See <a href="https://developers.google.com/speed/docs/insights/OptimizeCSSDelivery"><em>Optimize CSS delivery</em></a> on Google Developers
for details. <a href="#fnref:goo_dev_css" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:news">

      <p><a href="http://techcrunch.com/2010/04/19/google-censorship/"><em>Google Is Blocked In 25 Of The 100 Countries They Offer Products In</em></a>
by MG Siegler on TechCrunch. <a href="#fnref:news" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:po">
      <p><a href="http://blog.ivansiu.com/blog/2014/10/01/jing-ying-zhu-yi-yu-tou-piao-kao-shi/"><em>精英主義與投票考試</em></a> by Zigang Xiao. <a href="#fnref:po" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[Changed My FancyBoxLocal.js]]></title>
      <link href="http://vincenttam.github.io/blog/2014/12/13/changed-my-fancyboxlocal-dot-js/"/>
    
    <updated>2014-12-13T18:09:31+08:00</updated>
    <id>http://vincenttam.github.io/blog/2014/12/13/changed-my-fancyboxlocal-dot-js</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>I’ve been using fancyBox for image popup since August.<sup id="fnref:pp1"><a href="#fn:pp1" class="footnote">1</a></sup></p>

<h2 id="problem">Problem</h2>

<p>I would like to have large screenshots which belongs to the <code>fancybox</code>
CSS class <em>centre-aligned</em>.</p>

<!-- more -->

<h2 id="solution">Solution</h2>

<p>Refer to <code>source/javascripts/FancyBoxLocal.js</code> at commit <a href="https://github.com/VincentTam/vincenttam.github.io/commit/460b575">460b575</a> for
details.</p>

<p>I successfully worked out another solution using <a href="http://www.w3schools.com/js/">JavaScript</a> regular
expressions.  However, after looking at <a href="http://jquery.com">jQuery</a>’s <code>removeClass()</code>
method in it’s <a href="https://api.jquery.com/removeclass/">API documentation</a>, I dediced to start it all
over again using <a href="http://jquery.com">jQuery</a> due to the simplicity of this approach.</p>

<h2 id="lessons-learnt">Lessons learnt</h2>

<p>In <a href="http://www.vim.org">Vim</a>’s search pattern, <code>\&gt;</code> denotes the end of a word.  It took me
a while to find out its counterpart in <a href="http://www.w3schools.com/js/">JavaScript</a> — <code>\b</code>.  The
character ‘b’ stands for “boundary”.</p>

<hr />

<div class="footnotes">
  <ol>
    <li id="fn:pp1">
      <p>See <a href="/blog/2014/08/21/updated-octopress-source-code/"><em>Updated Octopress Source Code</em></a> for details. <a href="#fnref:pp1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[A Quick Markdown Syntax Error Detection for Writing MathJax Equations in Octopress Posts (2)]]></title>
      <link href="http://vincenttam.github.io/blog/2014/12/13/a-quick-markdown-syntax-error-detection-for-writing-mathjax-equations-in-octopress-posts-2/"/>
    
    <updated>2014-12-13T11:06:59+08:00</updated>
    <id>http://vincenttam.github.io/blog/2014/12/13/a-quick-markdown-syntax-error-detection-for-writing-mathjax-equations-in-octopress-posts-2</id>
    
      <content type="html"><![CDATA[<h2 id="problem">Problem</h2>

<p>In the <a href="/blog/2014/12/10/a-quick-markdown-syntax-error-detection-for-writing-mathjax-equations-in-octopress-posts-1/">previous post</a> in this series, I’ve listed a number of
steps and included a group of <a href="http://www.vim.org">Vim</a> editor commands for screening out
<a href="http://kramdown.gettalong.org">kramdown</a> syntax errors.  This is useful for [Octopress] posts with
ordinary contents.  However, if one wants to write some math equations
using <a href="http://www.mathjax.org">MathJax</a>, then one will encounter great difficulties.<sup id="fnref:pp1"><a href="#fn:pp1" class="footnote">1</a></sup></p>

<!-- more -->

<p>Even though the <a href="http://kramdown.gettalong.org">kramdown</a> command line utility enables users to
instantly convert code across different formats, and a web browser
enables them to notice any syntax error, these tools just help them to
find the mistakes, but <em>not</em> the solution.  In the cited post in the
<a href="#fn:pp1">first footnote</a>, I spent <em>hours</em> to realise that <em>exactly
eight ‘\’s</em> were needed to break the current line in <a href="http://www.mathjax.org">MathJax</a>.
After that, I feel that using eight ‘\’s and adding a ‘\’ before a
‘_’ in <a href="http://www.mathjax.org">MathJax</a> equations interrupt my thinking.</p>

<h2 id="solution">Solution</h2>

<p>Reading <a href="/blog/2014/09/13/completely-remove-linux-kernels/" title="Completely Remove Linux Kernels">an old post on removing Linux kernels on Ubuntu</a>, I
remembered that the <code>markdown</code> attribute in <code>&lt;div markdown="1"&gt;</code>
enabled <a href="http://kramdown.gettalong.org">kramdown</a> to interpret the Markdown code within the <code>&lt;div&gt;</code>
block.  Therefore, I tried to surround the HTML code for an inline
math expression with a <code>&lt;span&gt;</code> tag.  Unluckily, unlike <code>&lt;div&gt;</code>
blocks, the surrounded code was <em>still</em> interpreted by <a href="http://kramdown.gettalong.org">kramdown</a>.</p>

<p>After that, I read the syntax documentation.  It claimed that setting
<code>markdown="0"</code> disabled parsing of contents inside the tag <em>except</em>
for <code>&lt;span&gt;</code> tags.<sup id="fnref:doc"><a href="#fn:doc" class="footnote">2</a></sup>  Though the manual says that it’s
<em>impossible</em>, I still inserted it into the <code>&lt;span&gt;</code> tag which
surrounded the code for the <a href="http://www.mathjax.org">MathJax</a> math expression, because it
<em>didn’t</em> take much time to see the result: the inline <a href="http://www.mathjax.org">MathJax</a>
expression could be <em>successfully</em> displayed.<sup id="fnref:pp3"><a href="#fn:pp3" class="footnote">3</a></sup></p>

<hr />

<div class="footnotes">
  <ol>
    <li id="fn:pp1">
      <p>For example, it’s troublesome to <a href="/blog/2014/09/07/mathjax-and-rss/" title="MathJax and RSS">start a new line</a>. <a href="#fnref:pp1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:doc">

      <p>See the first bullet point of the section “HTML Spans” in
<a href="http://kramdown.gettalong.org/syntax.html#html-spans">kramdown’s syntax documentation</a>. <a href="#fnref:doc" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:pp3">

      <p>See <a href="/blog/2014/12/09/a-group-of-689-elements/"><em>A Group of 689 Elements</em></a> and
<a href="https://github.com/vincenttam/vincenttam.github.io/commit/af4f216">its source code</a> in Blog 1 at commit af4f216 for a
working example. <a href="#fnref:pp3" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[Octopress Search Error]]></title>
      <link href="http://vincenttam.github.io/blog/2014/12/12/octopress-search-error/"/>
    
    <updated>2014-12-12T12:52:12+08:00</updated>
    <id>http://vincenttam.github.io/blog/2014/12/12/octopress-search-error</id>
    
      <content type="html"><![CDATA[<h2 id="problem">Problem</h2>

<p>I used the search box in the navigation bar to search for pages in
this blog.</p>

<picture class="fancybox center" title="Searched with the search box for pages in this blog">
  <source srcset="/images/posts/OctSearchErr/err1.png" media="(min-width: 880px)" />
  <img alt="err1" src="http://vincenttam.github.io/images/posts/OctSearchErr/err1_s.png" />
</picture>

<p>It had been working well, but a month ago, the box searched for
webpages <em>other</em> than those in this blog.</p>

<picture class="fancybox center" title="Custom search failed">
  <source srcset="/images/posts/OctSearchErr/err2.png" media="(min-width: 880px)" />
  <img alt="err2" src="http://vincenttam.github.io/images/posts/OctSearchErr/err2_s.png" />
</picture>

<p><strong>How to limit the search to pages within this site only</strong>?</p>

<!-- more -->

<h2 id="discussion">Discussion</h2>

<p>I read the generated HTML code for the search box, and compared the
difference between a version of an HTML file in November, and another
version in early October.  However, I <em>couldn’t</em> find out the reason.</p>

<h2 id="a-temporary-fix">A temporary “fix”</h2>

<h3 id="local-re-generation-and-preview-of-site-contents-on-nix">Local re-generation and preview of site contents on *nix</h3>

<p>I noticed that the custom search failed after I had uploaded a Git
commit which had been written on M$ Win* 7.<sup id="fnref:befd4a7"><a href="#fn:befd4a7" class="footnote">1</a></sup>  Therefore,
when I was using my *nix desktop, I re-generated this site and
previewed it.</p>

<p><img class="fancybox center" src="/images/posts/OctSearchErr/temp_fix1.png" width="800" title="‘Locally generated site on Ubuntu’ ‘temp_fix1’" ></p>

<p>I saw that The search box worked fine this time.</p>

<p><img class="fancybox center" src="/images/posts/OctSearchErr/temp_fix2.png" width="800" title="‘The problem was gone!’ ‘temp_fix2’" ></p>

<p>Then, I <em>didn’t</em> hesitate to deploy this site to GitHub
Pages.<sup id="fnref:2e56754"><a href="#fn:2e56754" class="footnote">2</a></sup></p>

<h3 id="confirmed-the-fix">Confirmed the “fix”</h3>

<p>I browsed this blog on GitHub Pages to make sure that the problem had
been “fixed”.</p>

<p><img class="fancybox center" src="/images/posts/OctSearchErr/temp_fix3.png" width="800" title="‘Test the fix on GitHub Pages’ ‘temp_fix3’" ><br />
<img class="fancybox center" src="/images/posts/OctSearchErr/temp_fix4.png" width="800" title="‘The problem was really gone!’ ‘temp_fix4’" ></p>

<h3 id="failed-to-find-the-cause">Failed to find the cause</h3>

<p>I guessed that this was due to the difference between *nix and M$
Win*, after failing to find any clue from comparing the source code
in different versions.</p>

<h2 id="problem-appeared-again">Problem appeared again</h2>

<p>I generated this site again on M$ Win* since I had updated a
page.<sup id="fnref:6ea49e8"><a href="#fn:6ea49e8" class="footnote">3</a></sup> <sup id="fnref:31c066a"><a href="#fn:31c066a" class="footnote">4</a></sup>  Then the search box <em>couldn’t</em> limit the
search to pages within this blog.</p>

<h2 id="repeating-the-fix">Repeating the “fix”</h2>

<p>Three days ago, after pulling the recent commits from the remote
repository of this blog on GitHub, I wrote another post on Ubuntu, and
locally generated this site before publishing the post.<sup id="fnref:af4f216"><a href="#fn:af4f216" class="footnote">5</a></sup>
Unluckily, the search box still <em>failed</em> to work.</p>

<p>Moreover, I <em>couldn’t</em> understand why the custom search <em>failed</em> in
Mozilla Firefox and Google Chrome, but <em>worked</em> in M$ Internet
Explorer.</p>

<h2 id="solution">Solution</h2>

<h3 id="fix-the-problem">Fix the problem</h3>

<p>I found the page <a href="https://cuit.columbia.edu/add-search-box"><em>Add a Search Box</em></a> from the Columbia
University.  I followed the steps for limiting the search by
site.<sup id="fnref:35955df"><a href="#fn:35955df" class="footnote">6</a></sup>  <em>Without</em> the line <code>&lt;input type="hidden" name="as_dt"
value="i"/&gt;</code> in <code>source/_includes/navigation.html</code>, the search box
still work fine.</p>

<p><img class="fancybox center" src="/images/posts/OctSearchErr/sol1.png" width="800" title="‘Locally generated site on Ubuntu’ ‘sol1’" ><br />
<img class="fancybox center" src="/images/posts/OctSearchErr/sol2.png" width="800" title="‘The search box can finally limit the search by site.’ ‘sol2’" ></p>

<h3 id="test-the-fix">Test the fix</h3>

<p>In the past, I used <code>rake preview</code> to detect any errors.  As the
number of posts and pages grew, this method has become <em>inefficient</em>.</p>

<p>While testing the instructions in this guide, I put the HTML code for
the custom search box in an HTML file, and viewed the effects in
Firefox.  The URL variable <code>ei</code> was still there, but the custom search
was restricted to this site <em>only</em>.</p>

<p>After solving this problem, I discovered another solution in the pull
requests of Octopress.<sup id="fnref:alt_sol"><a href="#fn:alt_sol" class="footnote">7</a></sup></p>

<hr />
<p>(Added on Dec 21, 2014)</p>

<p>Now, the problem has been <em>fixed</em>.<sup id="fnref:514ed5e"><a href="#fn:514ed5e" class="footnote">8</a></sup></p>

<hr />

<div class="footnotes">
  <ol>
    <li id="fn:befd4a7">
      <p>See commit <a href="https://github.com/VincentTam/vincenttam.github.io/commit/befd4a7">befd4a7</a> on the <code>source</code> branch for details. <a href="#fnref:befd4a7" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2e56754">
      <p>See commit <a href="https://github.com/VincentTam/vincenttam.github.io/commit/2e56754">2e56754</a> on the <code>master</code> branch for details. <a href="#fnref:2e56754" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:6ea49e8">
      <p>See commit <a href="https://github.com/VincentTam/vincenttam.github.io/commit/6ea49e8">6ea49e8</a> on the <code>source</code> branch for details. <a href="#fnref:6ea49e8" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:31c066a">
      <p>See commit <a href="https://github.com/VincentTam/vincenttam.github.io/commit/31c066a">31c066a</a> on the <code>master</code> branch for details. <a href="#fnref:31c066a" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:af4f216">
      <p>See commit <a href="https://github.com/VincentTam/vincenttam.github.io/commit/af4f216">af4f216</a> on the <code>source</code> branch for details. <a href="#fnref:af4f216" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:35955df">
      <p>See commit <a href="https://github.com/VincentTam/vincenttam.github.io/commit/35955df">35955df</a> on the <code>source</code> branch for details. <a href="#fnref:35955df" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:alt_sol">
      <p>See <a href="https://github.com/imathis/octopress/pull/1681">Octopress issue 1681</a> for details. <a href="#fnref:alt_sol" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:514ed5e">

      <p>See commit <a href="https://github.com/imathis/octopress/commit/514ed5e">514ed5e</a> on the <code>master</code> branch of Octopress’s
repository on GitHub. <a href="#fnref:514ed5e" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[The Title of a New Octopress Post (2)]]></title>
      <link href="http://vincenttam.github.io/blog/2014/12/11/the-title-of-a-new-octopress-post-2/"/>
    
    <updated>2014-12-11T23:57:31+08:00</updated>
    <id>http://vincenttam.github.io/blog/2014/12/11/the-title-of-a-new-octopress-post-2</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>I’ve just written a linklog about <abbr title="International Space Station">ISS</abbr> and GNU/Linux.<sup id="fnref:pp"><a href="#fn:pp" class="footnote">1</a></sup></p>

<h2 id="problem">Problem</h2>

<p>I encountered a technical problem while creating the title of that
post.</p>

<h2 id="solution">Solution</h2>

<p>The following picture illustrates what should be done: escape the ‘,’
with ‘\’.</p>

<picture class="fancybox" title="MinGW command window">
  <source srcset="/images/posts/OctPostTitle2/cmd_big.png" media="(min-width: 840px)" /> 
  <source srcset="/images/posts/OctPostTitle2/cmd.png" media="(min-width: 620px)" /> 
  <img alt="MinGW command window" src="http://vincenttam.github.io/images/posts/OctPostTitle2/cmd_s.png" />
</picture>

<hr />

<div class="footnotes">
  <ol>
    <li id="fn:pp">

      <p>See
<a href="/blog/2014/12/11/international-space-station-attacked-by-virus-epidemics/"><em>International Space Station Attacked by “Virus Epidemics”</em></a>
for details. <a href="#fnref:pp" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
    
  </entry>
  
</feed>
