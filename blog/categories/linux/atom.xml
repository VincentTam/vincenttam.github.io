<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Linux | Blog 1]]></title>
  <link href="http://vincenttam.github.io/blog/categories/linux/atom.xml" rel="self"/>
  <link href="http://vincenttam.github.io/"/>
  <updated>2014-09-14T00:28:37+08:00</updated>
  <id>http://vincenttam.github.io/</id>
  <author>
    <name><![CDATA[Vincent Tam]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    
      <title type="html"><![CDATA[Completely Remove Linux Kernels]]></title>
      <link href="http://vincenttam.github.io/blog/2014/09/13/completely-remove-linux-kernels/"/>
    
    <updated>2014-09-13T23:24:51+08:00</updated>
    <id>http://vincenttam.github.io/blog/2014/09/13/completely-remove-linux-kernels</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>I issued the following command and then rebooted the machine.</p>

<pre class="cli"><code class="UBMono">$ sudo aptitude remove linux-headers-3.2.0-67-generic-pae \
&gt; linux-image-3.2.0-67-generic-pae linux-headers-3.13.0-33-generic \
&gt; linux-image-3.13.0-33-generic linux-image-extra-3.13.0-33-generic
</code></pre>

<h2 id="problem">Problem</h2>

<p>I checked the list of installed packages, and the above removed package was still there, though in the status of <code>rc</code>.<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup></p>

<p><strong>How can that package disappear from the list?</strong></p>

<!-- more -->

<h2 id="solution">Solution</h2>

<p>Use <code>purge</code> instead of <code>remove</code> in the above command.</p>

<pre class="cli"><code class="UBMono">owner@owner-Inspiron-560s:~$ <span class="UBHLCode">sudo aptitude purge linux-image-3.2.0-67-generic-pa
e</span>
[sudo] password for owner:
The following packages will be REMOVED:
  linux-image-3.2.0-67-generic-pae{p}
0 packages upgraded, 0 newly installed, 1 to remove and 0 not upgraded.
Need to get 0 B of archives. After unpacking 0 B will be used.
Do you want to continue? [Y/n/?] Y
(Reading database ... 349931 files and directories currently installed.)
Removing linux-image-3.2.0-67-generic-pae (3.2.0-67.101) ...
Purging configuration files for linux-image-3.2.0-67-generic-pae (3.2.0-67.101) 
...
Examining /etc/kernel/postrm.d .
run-parts: executing /etc/kernel/postrm.d/initramfs-tools 3.2.0-67-generic-pae /
boot/vmlinuz-3.2.0-67-generic-pae
run-parts: executing /etc/kernel/postrm.d/zz-update-grub 3.2.0-67-generic-pae /
boot/vmlinuz-3.2.0-67-generic-pae
owner@owner-Inspiron-560s:~$ <span class="UBHLCode">sudo aptitude purge linux-image-3.13.0-33-generic l
inux-image-extra-3.13.0-33-generic</span>
The following packages will be REMOVED:
  linux-image-3.13.0-33-generic{p} linux-image-extra-3.13.0-33-generic{p}
0 packages upgraded, 0 newly installed, 2 to remove and 0 not upgraded.
Need to get 0 B of archives. After unpacking 0 B will be used.
Do you want to continue? [Y/n/?] Y
(Reading database ... 349931 files and directories currently installed.)
Removing linux-image-3.13.0-33-generic (3.13.0-33.58) ...
Purging configuration files for linux-image-3.13.0-33-generic (3.13.0-33.58) ...
Examining /etc/kernel/postrm.d .
run-parts: executing /etc/kernel/postrm.d/initramfs-tools 3.13.0-33-generic /boo
t/vmlinuz-3.13.0-33-generic
run-parts: executing /etc/kernel/postrm.d/zz-update-grub 3.13.0-33-generic /boot
/vmlinuz-3.13.0-33-generic
Removing linux-image-extra-3.13.0-33-generic (3.13.0-33.58) ...
Purging configuration files for linux-image-extra-3.13.0-33-generic (3.13.0-33.5
8) ...
Examining /etc/kernel/postrm.d .
run-parts: executing /etc/kernel/postrm.d/initramfs-tools 3.13.0-33-generic /boo
t/vmlinuz-3.13.0-33-generic
run-parts: executing /etc/kernel/postrm.d/zz-update-grub 3.13.0-33-generic /boot
/vmlinuz-3.13.0-33-generic
</code></pre>

<p>After running the above two commands, the above three removed Linux
kernel images with status <code>rc</code> <em>shouldn’t</em> be seen in the list of
packages anymore.<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup></p>

<hr />

<div id="list1" class="noscr">
<p>The <strong>bolded</strong> lines represent the packages that are
going to be completely removed.</p>

<pre class="cli"><code class="UBMono">owner@owner-Inspiron-560s:~$ dpkg -l | grep linux
ii  fonts-<span class="grep">linux</span>libertine                                  5.3.0-2                                             all          Linux Libertine family of fonts
ii  libse<span class="grep">linux</span>1:i386                                      2.2.2-1ubuntu0.1                                    i386         SELinux runtime shared libraries
ii  libv4l-0:i386                                         1.0.1-1                                             i386         Collection of video4<span class="grep">linux</span> support lib
raries
ii  libv4lconvert0:i386                                   1.0.1-1                                             i386         Video4<span class="grep">linux</span> frame format conversion l
ibrary
ii  <span class="grep">linux</span>-firmware                                        1.127.5                                             all          Firmware for Linux kernel drivers
ii  <span class="grep">linux</span>-generic                                         3.13.0.35.42                                        i386         Complete Generic Linux kernel and hea
ders
ii  <span class="grep">linux</span>-generic-pae                                     3.13.0.35.42                                        i386         Transitional package.
ii  <span class="grep">linux</span>-headers-3.13.0-34                               3.13.0-34.60                                        all          Header files related to Linux kernel
version 3.13.0
ii  <span class="grep">linux</span>-headers-3.13.0-34-generic                       3.13.0-34.60                                        i386         Linux kernel headers for version 3.13
.0 on 32 bit x86 SMP
ii  <span class="grep">linux</span>-headers-3.13.0-35                               3.13.0-35.62                                        all          Header files related to Linux kernel
version 3.13.0
ii  <span class="grep">linux</span>-headers-3.13.0-35-generic                       3.13.0-35.62                                        i386         Linux kernel headers for version 3.13
.0 on 32 bit x86 SMP
ii  <span class="grep">linux</span>-headers-generic                                 3.13.0.35.42                                        i386         Generic Linux kernel headers
ii  <span class="grep">linux</span>-headers-generic-pae                             3.13.0.35.42                                        i386         Transitional package
<span class="UBHLCode">rc  <span class="grep">linux</span>-image-3.13.0-33-generic                         3.13.0-33.58                                        i386         Linux kernel image for version 3.13.0
on 32 bit x86 SMP</span>
ii  <span class="grep">linux</span>-image-3.13.0-34-generic                         3.13.0-34.60                                        i386         Linux kernel image for version 3.13.0
on 32 bit x86 SMP
ii  <span class="grep">linux</span>-image-3.13.0-35-generic                         3.13.0-35.62                                        i386         Linux kernel image for version 3.13.0
on 32 bit x86 SMP
<span class="UBHLCode">rc  <span class="grep">linux</span>-image-3.2.0-67-generic-pae                      3.2.0-67.101                                        i386         Linux kernel image for version 3.2.0
on 32 bit x86 SMP</span>
<span class="UBHLCode">rc  <span class="grep">linux</span>-image-extra-3.13.0-33-generic                   3.13.0-33.58                                        i386         Linux kernel extra modules for versio
n 3.13.0 on 32 bit x86 SMP</span>
ii  <span class="grep">linux</span>-image-extra-3.13.0-34-generic                   3.13.0-34.60                                        i386         Linux kernel extra modules for versio
n 3.13.0 on 32 bit x86 SMP
ii  <span class="grep">linux</span>-image-extra-3.13.0-35-generic                   3.13.0-35.62                                        i386         Linux kernel extra modules for versio
n 3.13.0 on 32 bit x86 SMP
ii  <span class="grep">linux</span>-image-generic                                   3.13.0.35.42                                        i386         Generic Linux kernel image
ii  <span class="grep">linux</span>-image-generic-pae                               3.13.0.35.42                                        i386         Transitional package
ii  <span class="grep">linux</span>-libc-dev:i386                                   3.13.0-35.62                                        i386         Linux Kernel Headers for development
ii  <span class="grep">linux</span>-sound-base                                      1.0.25+dfsg-0ubuntu4                                all          base package for ALSA and OSS sound s
ystems
ii  pptp-<span class="grep">linux</span>                                            1.7.2-7                                             i386         Point-to-Point Tunneling Protocol (PP
TP) Client
ii  sys<span class="grep">linux</span>                                              3:4.05+dfsg-6+deb8u1                                i386         collection of boot loaders
ii  sys<span class="grep">linux</span>-common                                       3:4.05+dfsg-6+deb8u1                                all          collection of boot loaders (common fi
les)
ii  sys<span class="grep">linux</span>-legacy                                       2:3.63+dfsg-2ubuntu5                                i386         Bootloader for Linux/i386 using MS-DO
S floppies
ii  util-<span class="grep">linux</span>                                            2.20.1-5.1ubuntu20.1                                i386         Miscellaneous system utilities
</code></pre>
</div>

<div id="list2" class="noscr">
<p>There&#8217;s <em>no</em> lines beginning with <code>rc</code>.</p>

<pre class="cli"><code class="UBMono">owner@owner-Inspiron-560s:~$ dpkg -l | grep linux
ii  fonts-<span class="grep">linux</span>libertine                                  5.3.0-2                                             all          Linux Libertine family of fonts
ii  libse<span class="grep">linux</span>1:i386                                      2.2.2-1ubuntu0.1                                    i386         SELinux runtime shared libraries
ii  libv4l-0:i386                                         1.0.1-1                                             i386         Collection of video4<span class="grep">linux</span> support lib
raries
ii  libv4lconvert0:i386                                   1.0.1-1                                             i386         Video4<span class="grep">linux</span> frame format conversion l
ibrary
ii  <span class="grep">linux</span>-firmware                                        1.127.5                                             all          Firmware for Linux kernel drivers
ii  <span class="grep">linux</span>-generic                                         3.13.0.35.42                                        i386         Complete Generic Linux kernel and hea
ders
ii  <span class="grep">linux</span>-generic-pae                                     3.13.0.35.42                                        i386         Transitional package.
ii  <span class="grep">linux</span>-headers-3.13.0-34                               3.13.0-34.60                                        all          Header files related to Linux kernel
version 3.13.0
ii  <span class="grep">linux</span>-headers-3.13.0-34-generic                       3.13.0-34.60                                        i386         Linux kernel headers for version 3.13
.0 on 32 bit x86 SMP
ii  <span class="grep">linux</span>-headers-3.13.0-35                               3.13.0-35.62                                        all          Header files related to Linux kernel
version 3.13.0
ii  <span class="grep">linux</span>-headers-3.13.0-35-generic                       3.13.0-35.62                                        i386         Linux kernel headers for version 3.13
.0 on 32 bit x86 SMP
ii  <span class="grep">linux</span>-headers-generic                                 3.13.0.35.42                                        i386         Generic Linux kernel headers
ii  <span class="grep">linux</span>-headers-generic-pae                             3.13.0.35.42                                        i386         Transitional package
ii  <span class="grep">linux</span>-image-3.13.0-34-generic                         3.13.0-34.60                                        i386         Linux kernel image for version 3.13.0
 on 32 bit x86 SMP
ii  <span class="grep">linux</span>-image-3.13.0-35-generic                         3.13.0-35.62                                        i386         Linux kernel image for version 3.13.0
 on 32 bit x86 SMP
ii  <span class="grep">linux</span>-image-extra-3.13.0-34-generic                   3.13.0-34.60                                        i386         Linux kernel extra modules for versio
n 3.13.0 on 32 bit x86 SMP
ii  <span class="grep">linux</span>-image-extra-3.13.0-35-generic                   3.13.0-35.62                                        i386         Linux kernel extra modules for versio
n 3.13.0 on 32 bit x86 SMP
ii  <span class="grep">linux</span>-image-generic                                   3.13.0.35.42                                        i386         Generic Linux kernel image
ii  <span class="grep">linux</span>-image-generic-pae                               3.13.0.35.42                                        i386         Transitional package
ii  <span class="grep">linux</span>-libc-dev:i386                                   3.13.0-35.62                                        i386         Linux Kernel Headers for development
ii  <span class="grep">linux</span>-sound-base                                      1.0.25+dfsg-0ubuntu4                                all          base package for ALSA and OSS sound s
ystems
ii  pptp-<span class="grep">linux</span>                                            1.7.2-7                                             i386         Point-to-Point Tunneling Protocol (PP
TP) Client
ii  sys<span class="grep">linux</span>                                              3:4.05+dfsg-6+deb8u1                                i386         collection of boot loaders
ii  sys<span class="grep">linux</span>-common                                       3:4.05+dfsg-6+deb8u1                                all          collection of boot loaders (common fi
les)
ii  sys<span class="grep">linux</span>-legacy                                       2:3.63+dfsg-2ubuntu5                                i386         Bootloader for Linux/i386 using MS-DO
S floppies
ii  util-<span class="grep">linux</span>                                            2.20.1-5.1ubuntu20.1                                i386         Miscellaneous system utilities
</code></pre>
</div>
<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Click <a href="#list1" class="cliwide">here</a> to view the terminal commands and output. <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>Click <a href="#list2" class="cliwide">here</a> to view the terminal commands and output. <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[I/O Errors During Removal of Old Kernels]]></title>
      <link href="http://vincenttam.github.io/blog/2014/09/13/i-slash-o-errors-during-removal-of-old-kernels/"/>
    
    <updated>2014-09-13T23:14:25+08:00</updated>
    <id>http://vincenttam.github.io/blog/2014/09/13/i-slash-o-errors-during-removal-of-old-kernels</id>
    
      <content type="html"><![CDATA[<h2 id="problem">Problem</h2>

<p>I encountered some block I/O errors while deleting old Linux kernels.</p>

<p><img class="fancybox" src="/images/posts/RmOldKer/err.png" width="900" title="‘Received errors in tty1’ ‘error messages’" ></p>

<!-- more -->

<p>As the error messages were just after the line <code>Found Fedora ...</code>, I
booted into Fedora 17 out of curiousity.</p>

<h2 id="cause">Cause</h2>

<p>In Fedora’s file manager, I found the reason for the above error
messages.</p>

<p><img class="fancybox" src="/images/posts/RmOldKer/cause.png" width="900" title="‘Cause of the above error’ ‘Fedora file manager’" ></p>
]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[Clang Complete on Ubuntu 14.04]]></title>
      <link href="http://vincenttam.github.io/blog/2014/08/29/clang-complete-on-ubuntu-14-dot-04/"/>
    
    <updated>2014-08-29T13:44:03+08:00</updated>
    <id>http://vincenttam.github.io/blog/2014/08/29/clang-complete-on-ubuntu-14-dot-04</id>
    
      <content type="html"><![CDATA[<h2 id="problem">Problem</h2>

<p>Last night, when I tried to write a new file <code>hello.cpp</code>, I got the
following problem.</p>

<pre class="cli"><code class="UBMono">"hello.cpp" 8L, 105C
Loading libclang failed, completion won't be available. Are you sure '/usr/lib/'
 contains libclang?
    /usr/lib//libclang.so: cannot open shared object file: No such file or direc
tory. To provide a path to libclang use Config.set_library_path() or Config.set_
library_file().

Press ENTER or type command to continue
</code></pre>

<!-- more -->

<h2 id="solution">Solution</h2>

<p>I googled “loading libclang failed”, and skimmed two results.  The
first one was an clang complete issue on GitHub.<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>  However, at
first glance, the problem was on Ubuntu <em>13.10, not 14.04</em>, and the
error messages <em>didn’t</em> resemble the above message.  The second one
was a Stack Overflow question.<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup>  From the first answer, I knew that
I need to check if <code>libclang1</code> package was installed.  <code>dkpg -l | grep
clang</code> told me that I’d got clang.  I read the second answer, and
viewed the list of files in <code>/usr/lib/</code>.  There’s <em>no</em> folders whose
name started with <code>x86</code>, and <em>no</em> file called <code>libclang.so.1</code> in each
sub-folder.  Looking at the issue <em>again</em> on GitHub, I found out how
to make use of the information from both sites.</p>

<pre class="cli"><code class="UBMono">[root@localhost /usr/lib/]# ln -s /usr/lib/llvm-3.4/lib/libclang.so .
</code></pre>

<p>To avoid problems, I <em>didn’t</em> set Vim global variable
<code>clang_library_path</code>.</p>

<p>I <em>didn’t</em> know whether <code>.1</code> should be appended to the end of
<code>libclang.so</code>.  Finally, I <em>didn’t</em> do so, and the plugin just
<em>worked</em>.</p>

<hr />
<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>See clang complete <a href="https://github.com/Rip-Rip/clang_complete/issues/370">issue #370</a> for details. <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>See Stack Overflow <a href="http://stackoverflow.com/q/22733943" title="Where is libclang.so?">question 22733943</a> for details. <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[My Problems in M$ and Ubuntu]]></title>
      <link href="http://vincenttam.github.io/blog/2014/08/27/my-problems-in-m$-and-ubuntu/"/>
    
    <updated>2014-08-27T13:19:20+08:00</updated>
    <id>http://vincenttam.github.io/blog/2014/08/27/my-problems-in-m$-and-ubuntu</id>
    
      <content type="html"><![CDATA[<p>I seldom encounter problems in both operating systems.  However,
there’s <em>exceptional</em> situations.</p>

<h2 id="m-win-7">M$ Win* 7</h2>

<p>I once booted into its “safe mode”, and experienced some problems
during an image upload.  I <em>don’t</em> wish to learn more about the
problem.</p>

<p><img class="fancybox" src="/images/posts/MSUbuProblem/MS.png" title="‘MS’ ‘MS problem’" ></p>

<h2 id="ubuntu-1404">Ubuntu 14.04</h2>

<p>Last night, I saw a small dialog box after the login.</p>

<p><img class="fancybox" src="/images/posts/MSUbuProblem/Ubu.png" title="‘Ubuntu 14.04’ ‘MS problem’" ></p>

<p>I checked the details—it was the problem of Ubuntu’s greeter, but
I’m going to do <em>nothing</em> to resolve it.</p>

<p>I think that this is due to my method of getting the newer version of
Ubuntu—upgrading instead of clearing and installing.<sup id="fnref:UpUb"><a href="#fn:UpUb" class="footnote">1</a></sup></p>

<p>Since I lack time to study the official manual and related posts about
clearing Linux partitions and installing Ubuntu 14.04, I just keep
using the Ubuntu that I have.</p>

<h2 id="conclusion">Conclusion</h2>

<p>I’m <em>not</em> going to argue whether GNU/Linux is better than M$ Win*.
There’s already <em>lots of</em> posts on that issue.</p>

<p>I just want to say that problems <em>can</em> exist in <em>any</em> OS.  If you
<em>don’t</em> intentionally break things and your machine still goes wrong,
then “keep calm and carry on”.  However, if it’s free software and you
have the patience and ability to browse its source code, you may see
what’s wrong.</p>

<p>It’s great to learn what’s really going on in an OS, and I personally
think that the GNU/Linux commands are better tools for that, when
compared to GUI tools.</p>

<hr />
<div class="footnotes">
  <ol>
    <li id="fn:UpUb">

      <p>Tam, V.  (Aug 13, 2014).  <em>Upgraded Ubuntu</em>.  Retrieved from
<a href="https://vincenttam.github.io/blog/2014/08/13/upgraded-ubuntu/">https://vincenttam.github.io/blog/2014/08/13/upgraded-ubuntu/</a> <a href="#fnref:UpUb" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
    
  </entry>
  
  <entry>
    
      <title type="html"><![CDATA[Ubuntu 14.04 Monospaced Font Family]]></title>
      <link href="http://vincenttam.github.io/blog/2014/08/17/ubuntu-14-dot-04-monospaced-font-family/"/>
    
    <updated>2014-08-17T16:00:48+08:00</updated>
    <id>http://vincenttam.github.io/blog/2014/08/17/ubuntu-14-dot-04-monospaced-font-family</id>
    
      <content type="html"><![CDATA[<h2 id="background">Background</h2>

<p>Last Wednesday, I upgraded Ubuntu from 12.04 LTS to 14.04 LTS.<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup></p>

<h2 id="problem">Problem</h2>

<p>As we can see from the second figure in the post in footnote 1, in
Chromium, the font used for displaying the source code of a website is
<em>not</em> monospaced.</p>

<p><img src="/images/posts/UbuntuDistUpgrade2/src_code.png" alt="HTML source code viewed in Chromium" /></p>

<!-- more -->

<h2 id="discussion">Discussion</h2>

<p>This is <em>not</em> the problem of Chromium.  I can also see this problem in
Firefox as well as GNOME Terminal.</p>

<ul>
  <li>
    <p>Firefox</p>

    <p><img src="/images/posts/Ubuntu1404Mono/FFViewSrc.png" alt="HTML source code viewed in Firefox" /></p>
  </li>
  <li>
    <p>GNOME Terminal</p>

    <ol>
      <li>Uncheck the first checkbox, whose label means “use the system
  fixed width font”, between “Default” and “Monospace 12”.</li>
      <li>The letters in the terminal will look ugly.</li>
    </ol>

    <p><img src="/images/posts/Ubuntu1404Mono/GnomeTerminal.png" alt="A screenshot of GNOME Terminal" /></p>
  </li>
</ul>

<p>When I wrote the post in footnote 1, I searched “ubuntu 14.04
monospace”, and I <em>couldn’t</em> find anything that helped me solve this
problem.</p>

<p>Today, I limit the search to “past year”, and discover a post about
font configurations on Linux Desktop.  It is the continuation of
another post, which contains two code blocks for testing “monospaced”
and “Courier New” font families.<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>The HTML source code for testing “monospaced” font family</span><a href='http://www.cnblogs.com/youxia/p/linux004.html'>link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">&quot;font-family: monospace; font-size: 12pt;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>#include <span class="ni">&amp;lt;</span>stdio.h<span class="ni">&amp;gt;</span><span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
</span><span class='line'>int main(){<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
</span><span class='line'>    return 0;//很顯然這是為了測試等寬字體<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
</span><span class='line'>}
</span><span class='line'><span class="nt">&lt;/span&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>The HTML source code for testing “Courier New” font family</span><a href='http://www.cnblogs.com/youxia/p/linux004.html'>link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">&quot;font-family: monospace; font-size: 12pt;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>#include <span class="ni">&amp;lt;</span>stdio.h<span class="ni">&amp;gt;</span><span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
</span><span class='line'>int main(){<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
</span><span class='line'>    return 0;//觀察下面的代碼了解monospace是否等於Courier New<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
</span><span class='line'>}
</span><span class='line'><span class="nt">&lt;/span&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>I inspect the elements in those code blocks, and realize that it is
the problem of the monospaced font family in Ubuntu 14.04.</p>

<h2 id="solution">Solution</h2>

<p>I find <code>fc-match</code> at a site, but I <em>can’t</em> find the site.  Running the
command, I can identify the culprit.</p>

<pre class="cli"><code class="UBMono">$ fc-match monospace
<span class="err">DroidSansFallbackFull.ttf: "Droid Sans" "Regular"</span>
</code></pre>

<p>Googling “ubuntu 14.04 monospace droidsansfallback”, I find a post
about the way to improve the display of Chinese characters.<sup id="fnref:3"><a href="#fn:3" class="footnote">3</a></sup>  Following
<em>part</em> of the method, I inserted the word <code>Mono</code> after <code>Droid Sans</code> in
the first <code>&lt;string&gt;</code> tag under the <code>&lt;edit&gt;</code> tag in the <code>&lt;match&gt;</code> tag
which contains <code>&lt;string&gt;monospace&lt;/string&gt;</code> in
<code>/etc/fonts/conf.avail/69-language-selector-zh-hk.conf</code>.</p>

<p><div><script src='https://gist.github.com/5fe406cf6bfcd6a6179b.js'></script>
<noscript><pre><code>&lt;match target=&quot;pattern&quot;&gt;
	&lt;test qual=&quot;any&quot; name=&quot;family&quot;&gt;
		&lt;string&gt;monospace&lt;/string&gt;
	&lt;/test&gt;
&lt;test name=&quot;lang&quot;&gt;
    &lt;string&gt;zh-hk&lt;/string&gt;
&lt;/test&gt;
	&lt;edit name=&quot;family&quot; mode=&quot;prepend&quot; binding=&quot;strong&quot;&gt;
		&lt;string&gt;Droid Sans&lt;/string&gt;
		&lt;string&gt;AR PL UMing HK&lt;/string&gt;
		&lt;string&gt;AR PL New Sung&lt;/string&gt;
		&lt;string&gt;HYSong&lt;/string&gt;
		&lt;string&gt;AR PL UKai HK&lt;/string&gt;
		&lt;string&gt;AR PL ZenKai Uni&lt;/string&gt;
	&lt;/edit&gt;
&lt;/match&gt;</code></pre></noscript></div>
</p>

<p>The last part of Steve Chang’s post about using Ubuntu 14.04 LTS
elegantly advices user to execute <code>sudo fc-cache -v</code> to update the
font cache.<sup id="fnref:4"><a href="#fn:4" class="footnote">4</a></sup>  Actually, <em>without</em> the <code>-v</code> flag, the command still
works.</p>

<pre class="cli"><code class="UBMono"># fc-cache
/usr/share/fonts: skipping, existing cache is valid: 0 fonts, 8 dirs
/usr/share/fonts/X11: skipping, existing cache is valid: 0 fonts, 4 dirs
/usr/share/fonts/X11/Type1: skipping, existing cache is valid: 82 fonts, 0 dirs
/usr/share/fonts/X11/encodings: skipping, existing cache is valid: 0 fonts, 1 di
rs
/usr/share/fonts/X11/encodings/large: skipping, existing cache is valid: 0 fonts
, 0 dirs
/usr/share/fonts/X11/misc: skipping, existing cache is valid: 59 fonts, 0 dirs
/usr/share/fonts/X11/util: skipping, existing cache is valid: 0 fonts, 0 dirs
/usr/share/fonts/cmap: skipping, existing cache is valid: 0 fonts, 5 dirs
/usr/share/fonts/cmap/adobe-cns1: skipping, existing cache is valid: 0 fonts, 0 
dirs
/usr/share/fonts/cmap/adobe-gb1: skipping, existing cache is valid: 0 fonts, 0 d
irs
/usr/share/fonts/cmap/adobe-japan1: skipping, existing cache is valid: 0 fonts, 
0 dirs
/usr/share/fonts/cmap/adobe-japan2: skipping, existing cache is valid: 0 fonts, 
0 dirs
/usr/share/fonts/cmap/adobe-korea1: skipping, existing cache is valid: 0 fonts, 
0 dirs
/usr/share/fonts/eot: skipping, existing cache is valid: 0 fonts, 1 dirs
/usr/share/fonts/eot/font-awesome: skipping, existing cache is valid: 0 fonts, 0
dirs
/usr/share/fonts/opentype: skipping, existing cache is valid: 0 fonts, 11 dirs
/usr/share/fonts/opentype/cabin: skipping, existing cache is valid: 8 fonts, 0 d
irs
/usr/share/fonts/opentype/font-awesome: skipping, existing cache is valid: 1 fon
ts, 0 dirs
/usr/share/fonts/opentype/freefont: skipping, existing cache is valid: 12 fonts,
0 dirs
/usr/share/fonts/opentype/ipaexfont-gothic: skipping, existing cache is valid: 1
fonts, 0 dirs
/usr/share/fonts/opentype/ipaexfont-mincho: skipping, existing cache is valid: 1
fonts, 0 dirs
/usr/share/fonts/opentype/ipafont-gothic: skipping, existing cache is valid: 2 f
onts, 0 dirs
/usr/share/fonts/opentype/ipafont-mincho: skipping, existing cache is valid: 2 f
onts, 0 dirs
/usr/share/fonts/opentype/linux-libertine: skipping, existing cache is valid: 13
fonts, 0 dirs
/usr/share/fonts/opentype/lobster: skipping, existing cache is valid: 1 fonts, 0
dirs
/usr/share/fonts/opentype/lobstertwo: skipping, existing cache is valid: 4 fonts
, 0 dirs
/usr/share/fonts/opentype/stix: skipping, existing cache is valid: 29 fonts, 0 d
irs
/usr/share/fonts/svg: skipping, existing cache is valid: 0 fonts, 1 dirs
/usr/share/fonts/svg/font-awesome: skipping, existing cache is valid: 0 fonts, 0
dirs
/usr/share/fonts/truetype: skipping, existing cache is valid: 2 fonts, 42 dirs
/usr/share/fonts/truetype/abyssinica: skipping, existing cache is valid: 1 fonts
, 0 dirs
/usr/share/fonts/truetype/adf: skipping, existing cache is valid: 28 fonts, 0 di
rs
/usr/share/fonts/truetype/arphic: skipping, existing cache is valid: 8 fonts, 0 
dirs
/usr/share/fonts/truetype/artemisia: skipping, existing cache is valid: 4 fonts,
0 dirs
/usr/share/fonts/truetype/asana-math: skipping, existing cache is valid: 1 fonts
, 0 dirs
/usr/share/fonts/truetype/comfortaa: skipping, existing cache is valid: 3 fonts,
0 dirs
/usr/share/fonts/truetype/complutum: skipping, existing cache is valid: 1 fonts,
0 dirs
/usr/share/fonts/truetype/dejavu: skipping, existing cache is valid: 21 fonts, 0
dirs
/usr/share/fonts/truetype/didot: skipping, existing cache is valid: 4 fonts, 0 d
irs
/usr/share/fonts/truetype/droid: skipping, existing cache is valid: 18 fonts, 0 
dirs
/usr/share/fonts/truetype/font-awesome: skipping, existing cache is valid: 1 fon
ts, 0 dirs
/usr/share/fonts/truetype/freefont: skipping, existing cache is valid: 12 fonts,
0 dirs
/usr/share/fonts/truetype/gentium: skipping, existing cache is valid: 4 fonts, 0
dirs
/usr/share/fonts/truetype/gentium-basic: skipping, existing cache is valid: 8 fo
nts, 0 dirs
/usr/share/fonts/truetype/horai-umefont: skipping, existing cache is valid: 18 f
onts, 0 dirs
/usr/share/fonts/truetype/inconsolata: skipping, existing cache is valid: 1 font
s, 0 dirs
/usr/share/fonts/truetype/junicode: skipping, existing cache is valid: 4 fonts, 
0 dirs
/usr/share/fonts/truetype/kacst: skipping, existing cache is valid: 15 fonts, 0 
dirs
/usr/share/fonts/truetype/kacst-one: skipping, existing cache is valid: 2 fonts,
0 dirs
/usr/share/fonts/truetype/lao: skipping, existing cache is valid: 1 fonts, 0 dir
s
/usr/share/fonts/truetype/lato: skipping, existing cache is valid: 10 fonts, 0 d
irs
/usr/share/fonts/truetype/liberation: skipping, existing cache is valid: 16 font
s, 0 dirs
/usr/share/fonts/truetype/msttcorefonts: skipping, existing cache is valid: 60 f
onts, 0 dirs
/usr/share/fonts/truetype/nanum: skipping, existing cache is valid: 6 fonts, 0 d
irs
/usr/share/fonts/truetype/neohellenic: skipping, existing cache is valid: 4 font
s, 0 dirs
/usr/share/fonts/truetype/olga: skipping, existing cache is valid: 1 fonts, 0 di
rs
/usr/share/fonts/truetype/openoffice: skipping, existing cache is valid: 1 fonts
, 0 dirs
/usr/share/fonts/truetype/padauk: skipping, existing cache is valid: 4 fonts, 0 
dirs
/usr/share/fonts/truetype/sinhala: skipping, existing cache is valid: 1 fonts, 0
dirs
/usr/share/fonts/truetype/solomos: skipping, existing cache is valid: 1 fonts, 0
dirs
/usr/share/fonts/truetype/takao-gothic: skipping, existing cache is valid: 1 fon
ts, 0 dirs
/usr/share/fonts/truetype/tibetan-machine: skipping, existing cache is valid: 1 
fonts, 0 dirs
/usr/share/fonts/truetype/tlwg: skipping, existing cache is valid: 54 fonts, 0 d
irs
/usr/share/fonts/truetype/ttf-dejavu: skipping, existing cache is valid: 21 font
s, 0 dirs
/usr/share/fonts/truetype/ttf-indic-fonts-core: skipping, existing cache is vali
d: 17 fonts, 0 dirs
/usr/share/fonts/truetype/ttf-khmeros-core: skipping, existing cache is valid: 2
fonts, 0 dirs
/usr/share/fonts/truetype/ttf-liberation: skipping, existing cache is valid: 16 
fonts, 0 dirs
/usr/share/fonts/truetype/ttf-marvosym: skipping, existing cache is valid: 1 fon
ts, 0 dirs
/usr/share/fonts/truetype/ttf-punjabi-fonts: skipping, existing cache is valid: 
2 fonts, 0 dirs
/usr/share/fonts/truetype/ubuntu-font-family: skipping, existing cache is valid:
13 fonts, 0 dirs
/usr/share/fonts/truetype/unfonts-core: skipping, existing cache is valid: 12 fo
nts, 0 dirs
/usr/share/fonts/truetype/wqy: skipping, existing cache is valid: 5 fonts, 0 dir
s
/usr/share/fonts/type1: skipping, existing cache is valid: 0 fonts, 3 dirs
/usr/share/fonts/type1/gsfonts: skipping, existing cache is valid: 35 fonts, 0 d
irs
/usr/share/fonts/type1/mathml: skipping, existing cache is valid: 1 fonts, 0 dir
s
/usr/share/fonts/type1/texlive-fonts-recommended: skipping, existing cache is va
lid: 47 fonts, 0 dirs
/usr/share/fonts/woff: skipping, existing cache is valid: 0 fonts, 1 dirs
/usr/share/fonts/woff/font-awesome: skipping, existing cache is valid: 1 fonts, 
0 dirs
/usr/local/share/fonts: skipping, existing cache is valid: 0 fonts, 0 dirs
/home/owner/.local/share/fonts: skipping, no such directory
/home/owner/.fonts: skipping, existing cache is valid: 29 fonts, 0 dirs
/usr/share/texmf/fonts/opentype/public/lm: skipping, existing cache is valid: 72
fonts, 0 dirs
/usr/share/texmf/fonts/opentype/public/lm-math: skipping, existing cache is vali
d: 1 fonts, 0 dirs
/usr/share/texmf/fonts/opentype/public/tex-gyre: skipping, existing cache is val
id: 33 fonts, 0 dirs
/usr/share/texmf/fonts/opentype/public/tex-gyre-math: skipping, existing cache i
s valid: 2 fonts, 0 dirs
/usr/share/fonts: caching, new cache contents: 0 fonts, 8 dirs
/usr/local/share/fonts: caching, new cache contents: 0 fonts, 0 dirs
/home/owner/.local/share/fonts: skipping, no such directory
/home/owner/.fonts: caching, new cache contents: 29 fonts, 0 dirs
/usr/share/texmf/fonts/opentype/public/lm: caching, new cache contents: 72 fonts
, 0 dirs
/usr/share/texmf/fonts/opentype/public/lm-math: caching, new cache contents: 1 f
onts, 0 dirs
/usr/share/texmf/fonts/opentype/public/tex-gyre: caching, new cache contents: 33
fonts, 0 dirs
/usr/share/texmf/fonts/opentype/public/tex-gyre-math: caching, new cache content
s: 2 fonts, 0 dirs
/var/cache/fontconfig: cleaning cache directory
/home/owner/.cache/fontconfig: cleaning cache directory
/home/owner/.fontconfig: cleaning cache directory
fc-cache: succeeded
</code></pre>

<p>Now, <code>fc-match</code> returns me a fixed-width font.</p>

<pre class="cli"><code class="UBMono">$ fc-match monospace
DroidSans<span class="UBHLCode">Mono</span>.ttf: "Droid Sans <span class="UBHLCode">Mono</span>" "Regular"
</code></pre>

<p>The following screenshots show that the above configurations can
really fix the problem.</p>

<ul>
  <li>
    <p>Chromium</p>

    <p><img src="/images/posts/Ubuntu1404Mono/FFViewSrc2.png" alt="HTML source code viewed in Chromium again" /></p>
  </li>
  <li>
    <p>Firefox</p>

    <p><img src="/images/posts/Ubuntu1404Mono/ChromeViewSrc2.png" alt="HTML source code viewed in Firefox again" /></p>
  </li>
</ul>

<hr />

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Refer to <a href="/blog/2014/08/13/upgraded-ubuntu/"><em>Upgraded Ubuntu</em></a> for details. <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>Refer to <a href="http://www.cnblogs.com/youxia/p/linux004.html">the post</a> for details. <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>Refer to <a href="http://goo.gl/tKCOA1" title="修改ubuntu 14.04 中文版的默認中文字體">the post</a> for details. <a href="#fnref:3" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:4">

      <p>Chang, S.  (Jun 23, 2014).  <em>如何優雅的使用Ubuntu 14.04 LTS</em>.
Retrieved from <a href="https://emitvoice.github.io/2014/06/diy-ubuntu/">https://emitvoice.github.io/2014/06/diy-ubuntu/</a> <a href="#fnref:4" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
    
  </entry>
  
</feed>
